//# sourceMappingURL=application_deferred.js.map
window.rm_sso_h={doRequest:function(b,d){setTimeout(function(){rm_sso_h.doRefresh(b,d)},200)},doRefresh:function(b,d){var a=$.cookie("sso_timeout");rm_sso_h.log("do sso refresh",a);a||($.cookie("sso_timeout",new Date,{expires:new Date((new Date).getTime()+42E4),path:"/"}),window.current_user_id||(rm_sso_h.log("call hash",b),$.ajax(b+"/external/hashNew?siteId="+d+"&callback=?",{crossDomain:!0,dataType:"jsonp",xhrFields:{withCredentials:!0},success:function(b){rm_sso_h.newUpdate(b.token)},error:function(b,
a){rm_sso_h.logError("ajax: "+a)}})))},logError:function(b){b="SSO transport error "+b;rm_sso_h.log(b);showNotySingleMessage(b,"error")},log:function(b,d){try{window.log&&log(b,d)}catch(a){}},newUpdateRefresh:function(b){rm_sso_h.log("ssh refresh done",b)},newUpdate:function(b){if(b){rm_sso_h.log("log params is ",b);try{forumSsoCallback(b)}catch(d){rm_sso_h.log(d)}rm_sso_h.processCallbacks(b)}},processCallbacks:function(b){window.newSSOForumCookieDoneLog&&newSSOForumCookieDoneLog(b);if(window.newSSOForumCookieDone)return newSSOForumCookieDone(b)}};
+function(b){function d(a){var e;a=a.attr("data-target")||(e=a.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return b(document).find(a)}function a(a){return this.each(function(){var d=b(this),c=d.data("bs.collapse"),f=b.extend({},e.DEFAULTS,d.data(),"object"==typeof a&&a);!c&&f.toggle&&/show|hide/.test(a)&&(f.toggle=!1);c||d.data("bs.collapse",c=new e(this,f));if("string"==typeof a)c[a]()})}var e=function(a,d){this.$element=b(a);this.options=b.extend({},e.DEFAULTS,d);this.$trigger=b('[data-toggle="collapse"][href="#'+
a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};e.VERSION="3.4.1";e.TRANSITION_DURATION=350;e.DEFAULTS={toggle:!0};e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var d,g=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(g&&g.length&&(d=g.data("bs.collapse"))&&d.transitioning)return;var c=b.Event("show.bs.collapse");this.$element.trigger(c);if(!c.isDefaultPrevented()){g&&g.length&&(a.call(g,"hide"),d||g.data("bs.collapse",null));var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;d=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!b.support.transition)return d.call(this);g=b.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",b.proxy(d,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[f](this.$element[0][g])}}};e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=b.Event("hide.bs.collapse");this.$element.trigger(a);if(!a.isDefaultPrevented()){a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var d=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!b.support.transition)return d.call(this);this.$element[a](0).one("bsTransitionEnd",b.proxy(d,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}};e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};e.prototype.getParent=function(){return b(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(b.proxy(function(a,e){a=b(e);this.addAriaAndCollapsedClass(d(a),a)},this)).end()};e.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c);b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var g=b.fn.collapse;b.fn.collapse=a;b.fn.collapse.Constructor=e;b.fn.collapse.noConflict=function(){b.fn.collapse=g;return this};b(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var g=b(this);g.attr("data-target")||
e.preventDefault();e=d(g);g=e.data("bs.collapse")?"toggle":g.data();a.call(e,g)})}(jQuery);
+function(b){function d(c,a){var f=c.nodeName.toLowerCase();if(-1!==b.inArray(f,a))return-1!==b.inArray(f,g)?!(!c.nodeValue.match(h)&&!c.nodeValue.match(m)):!0;c=b(a).filter(function(c,a){return a instanceof RegExp});a=0;for(var e=c.length;a<e;a++)if(f.match(c[a]))return!0;return!1}function a(c,a,f){if(0===c.length)return c;if(f&&"function"===typeof f)return f(c);if(!document.implementation||!document.implementation.createHTMLDocument)return c;f=document.implementation.createHTMLDocument("sanitization");
f.body.innerHTML=c;c=b.map(a,function(c,n){return n});for(var e=b(f.body).find("*"),g=0,h=e.length;g<h;g++){var x=e[g],m=x.nodeName.toLowerCase();if(-1===b.inArray(m,c))x.parentNode.removeChild(x);else for(var p=b.map(x.attributes,function(c){return c}),m=[].concat(a["*"]||[],a[m]||[]),n=0,w=p.length;n<w;n++)d(p[n],m)||x.removeAttribute(p[n].nodeName)}return f.body.innerHTML}var e=["sanitize","whiteList","sanitizeFn"],g="background cite href itemtype longdesc poster src xlink:href".split(" "),h=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,
m=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,c=function(c,a){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",c,a)};c.VERSION="3.4.1";c.TRANSITION_DURATION=150;c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",
title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}};c.prototype.init=function(c,a,f){this.enabled=!0;this.type=c;this.$element=b(a);
this.options=this.getOptions(f);this.$viewport=this.options.viewport&&b(document).find(b.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");c=this.options.trigger.split(" ");for(a=c.length;a--;)if(f=
c[a],"click"==f)this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this));else if("manual"!=f){var e="hover"==f?"mouseleave":"focusout";this.$element.on(("hover"==f?"mouseenter":"focusin")+"."+this.type,this.options.selector,b.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,b.proxy(this.leave,this))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};
c.prototype.getOptions=function(c){var f=this.$element.data(),d;for(d in f)f.hasOwnProperty(d)&&-1!==b.inArray(d,e)&&delete f[d];c=b.extend({},this.getDefaults(),f,c);c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay});c.sanitize&&(c.template=a(c.template,c.whiteList,c.sanitizeFn));return c};c.prototype.getDelegateOptions=function(){var c={},a=this.getDefaults();this._options&&b.each(this._options,function(b,f){a[b]!=f&&(c[b]=f)});return c};c.prototype.enter=function(c){var a=
c instanceof this.constructor?c:b(c.currentTarget).data("bs."+this.type);a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a));c instanceof b.Event&&(a.inState["focusin"==c.type?"focus":"hover"]=!0);if(a.tip().hasClass("in")||"in"==a.hoverState)a.hoverState="in";else{clearTimeout(a.timeout);a.hoverState="in";if(!a.options.delay||!a.options.delay.show)return a.show();a.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)}};
c.prototype.isInStateTrue=function(){for(var c in this.inState)if(this.inState[c])return!0;return!1};c.prototype.leave=function(c){var a=c instanceof this.constructor?c:b(c.currentTarget).data("bs."+this.type);a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a));c instanceof b.Event&&(a.inState["focusout"==c.type?"focus":"hover"]=!1);if(!a.isInStateTrue()){clearTimeout(a.timeout);a.hoverState="out";if(!a.options.delay||!a.options.delay.hide)return a.hide();
a.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)}};c.prototype.show=function(){var a=b.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var f=b.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!a.isDefaultPrevented()&&f){var e=this,a=this.tip(),f=this.getUID(this.type);this.setContent();a.attr("id",f);this.$element.attr("aria-describedby",f);this.options.animation&&a.addClass("fade");var f="function"==
typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,d=/\s?auto?\s?/i,g=d.test(f);g&&(f=f.replace(d,"")||"top");a.detach().css({top:0,left:0,display:"block"}).addClass(f).data("bs."+this.type,this);this.options.container?a.appendTo(b(document).find(this.options.container)):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),h=a[0].offsetWidth,x=a[0].offsetHeight;if(g){var g=f,m=this.getPosition(this.$viewport),
f="bottom"==f&&d.bottom+x>m.bottom?"top":"top"==f&&d.top-x<m.top?"bottom":"right"==f&&d.right+h>m.width?"left":"left"==f&&d.left-h<m.left?"right":f;a.removeClass(g).addClass(f)}d=this.getCalculatedOffset(f,d,h,x);this.applyPlacement(d,f);f=function(){var c=e.hoverState;e.$element.trigger("shown.bs."+e.type);e.hoverState=null;"out"==c&&e.leave(e)};b.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f()}}};c.prototype.applyPlacement=
function(c,a){var f=this.tip(),e=f[0].offsetWidth,d=f[0].offsetHeight,g=parseInt(f.css("margin-top"),10),h=parseInt(f.css("margin-left"),10);isNaN(g)&&(g=0);isNaN(h)&&(h=0);c.top+=g;c.left+=h;b.offset.setOffset(f[0],b.extend({using:function(c){f.css({top:Math.round(c.top),left:Math.round(c.left)})}},c),0);f.addClass("in");g=f[0].offsetWidth;h=f[0].offsetHeight;"top"==a&&h!=d&&(c.top=c.top+d-h);var m=this.getViewportAdjustedDelta(a,c,g,h);m.left?c.left+=m.left:c.top+=m.top;e=(a=/top|bottom/.test(a))?
2*m.left-e+g:2*m.top-d+h;d=a?"offsetWidth":"offsetHeight";f.offset(c);this.replaceArrow(e,f[0][d],a)};c.prototype.replaceArrow=function(c,a,b){this.arrow().css(b?"left":"top",50*(1-c/a)+"%").css(b?"top":"left","")};c.prototype.setContent=function(){var c=this.tip(),b=this.getTitle();this.options.html?(this.options.sanitize&&(b=a(b,this.options.whiteList,this.options.sanitizeFn)),c.find(".tooltip-inner").html(b)):c.find(".tooltip-inner").text(b);c.removeClass("fade in top bottom left right")};c.prototype.hide=
function(a){function f(){"in"!=e.hoverState&&d.detach();e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type);a&&a()}var e=this,d=b(this.$tip),g=b.Event("hide.bs."+this.type);this.$element.trigger(g);if(!g.isDefaultPrevented())return d.removeClass("in"),b.support.transition&&d.hasClass("fade")?d.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),this.hoverState=null,this};c.prototype.fixTitle=function(){var c=this.$element;(c.attr("title")||"string"!=
typeof c.attr("data-original-title"))&&c.attr("data-original-title",c.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(c){c=c||this.$element;var a=c[0],f="BODY"==a.tagName,e=a.getBoundingClientRect();null==e.width&&(e=b.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));a=window.SVGElement&&a instanceof window.SVGElement;a=f?{top:0,left:0}:a?null:c.offset();c={scroll:f?document.documentElement.scrollTop||document.body.scrollTop:
c.scrollTop()};f=f?{width:b(window).width(),height:b(window).height()}:null;return b.extend({},e,c,f,a)};c.prototype.getCalculatedOffset=function(c,a,b,f){return"bottom"==c?{top:a.top+a.height,left:a.left+a.width/2-b/2}:"top"==c?{top:a.top-f,left:a.left+a.width/2-b/2}:"left"==c?{top:a.top+a.height/2-f/2,left:a.left-b}:{top:a.top+a.height/2-f/2,left:a.left+a.width}};c.prototype.getViewportAdjustedDelta=function(c,a,b,f){var e={top:0,left:0};if(!this.$viewport)return e;var d=this.options.viewport&&
this.options.viewport.padding||0,g=this.getPosition(this.$viewport);/right|left/.test(c)?(b=a.top-d-g.scroll,a=a.top+d-g.scroll+f,b<g.top?e.top=g.top-b:a>g.top+g.height&&(e.top=g.top+g.height-a)):(f=a.left-d,a=a.left+d+b,f<g.left?e.left=g.left-f:a>g.right&&(e.left=g.left+g.width-a));return e};c.prototype.getTitle=function(){var c=this.$element,a=this.options;return c.attr("data-original-title")||("function"==typeof a.title?a.title.call(c[0]):a.title)};c.prototype.getUID=function(c){do c+=~~(1E6*Math.random());
while(document.getElementById(c));return c};c.prototype.tip=function(){if(!this.$tip&&(this.$tip=b(this.options.template),1!=this.$tip.length))throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};
c.prototype.toggle=function(c){var a=this;c&&(a=b(c.currentTarget).data("bs."+this.type),a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a)));c?(a.inState.click=!a.inState.click,a.isInStateTrue()?a.enter(a):a.leave(a)):a.tip().hasClass("in")?a.leave(a):a.enter(a)};c.prototype.destroy=function(){var c=this;clearTimeout(this.timeout);this.hide(function(){c.$element.off("."+c.type).removeData("bs."+c.type);c.$tip&&c.$tip.detach();c.$tip=null;
c.$arrow=null;c.$viewport=null;c.$element=null})};c.prototype.sanitizeHtml=function(c){return a(c,this.options.whiteList,this.options.sanitizeFn)};var f=b.fn.tooltip;b.fn.tooltip=function(a){return this.each(function(){var f=b(this),e=f.data("bs.tooltip"),d="object"==typeof a&&a;if(e||!/destroy|hide/.test(a))if(e||f.data("bs.tooltip",e=new c(this,d)),"string"==typeof a)e[a]()})};b.fn.tooltip.Constructor=c;b.fn.tooltip.noConflict=function(){b.fn.tooltip=f;return this}}(jQuery);
+function(b){function d(a){var e=a.attr("data-target");e||(e=(e=a.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));return(e="#"!==e?b(document).find(e):null)&&e.length?e:a.parent()}function a(a){a&&3===a.which||(b(".dropdown-backdrop").remove(),b('[data-toggle="dropdown"]').each(function(){var e=b(this),c=d(e),f={relatedTarget:this};!c.hasClass("open")||a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&b.contains(c[0],a.target)||(c.trigger(a=b.Event("hide.bs.dropdown",
f)),a.isDefaultPrevented()||(e.attr("aria-expanded","false"),c.removeClass("open").trigger(b.Event("hidden.bs.dropdown",f))))}))}var e=function(a){b(a).on("click.bs.dropdown",this.toggle)};e.VERSION="3.4.1";e.prototype.toggle=function(e){var g=b(this);if(!g.is(".disabled, :disabled")){var c=d(g);e=c.hasClass("open");a();if(!e){if("ontouchstart"in document.documentElement&&!c.closest(".navbar-nav").length)b(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(b(this)).on("click",
a);var f={relatedTarget:this};c.trigger(e=b.Event("show.bs.dropdown",f));if(e.isDefaultPrevented())return;g.trigger("focus").attr("aria-expanded","true");c.toggleClass("open").trigger(b.Event("shown.bs.dropdown",f))}return!1}};e.prototype.keydown=function(a){if(/(38|40|27|32)/.test(a.which)&&!/input|textarea/i.test(a.target.tagName)){var e=b(this);a.preventDefault();a.stopPropagation();if(!e.is(".disabled, :disabled")){var c=d(e),f=c.hasClass("open");if(!f&&27!=a.which||f&&27==a.which)return 27==
a.which&&c.find('[data-toggle="dropdown"]').trigger("focus"),e.trigger("click");e=c.find(".dropdown-menu li:not(.disabled):visible a");e.length&&(c=e.index(a.target),38==a.which&&0<c&&c--,40==a.which&&c<e.length-1&&c++,~c||(c=0),e.eq(c).trigger("focus"))}}};var g=b.fn.dropdown;b.fn.dropdown=function(a){return this.each(function(){var d=b(this),c=d.data("bs.dropdown");c||d.data("bs.dropdown",c=new e(this));"string"==typeof a&&c[a].call(d)})};b.fn.dropdown.Constructor=e;b.fn.dropdown.noConflict=function(){b.fn.dropdown=
g;return this};b(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',e.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',e.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",e.prototype.keydown)}(jQuery);
+function(b){function d(e){return this.each(function(){var d=b(this),c=d.data("bs.tab");c||d.data("bs.tab",c=new a(this));if("string"==typeof e)c[e]()})}var a=function(a){this.element=b(a)};a.VERSION="3.4.1";a.TRANSITION_DURATION=150;a.prototype.show=function(){var a=this.element,e=a.closest("ul:not(.dropdown-menu)"),c=a.data("target");c||(c=(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));if(!a.parent("li").hasClass("active")){var f=e.find(".active:last a"),d=b.Event("hide.bs.tab",{relatedTarget:a[0]}),
g=b.Event("show.bs.tab",{relatedTarget:f[0]});f.trigger(d);a.trigger(g);g.isDefaultPrevented()||d.isDefaultPrevented()||(c=b(document).find(c),this.activate(a.closest("li"),e),this.activate(c,c.parent(),function(){f.trigger({type:"hidden.bs.tab",relatedTarget:a[0]});a.trigger({type:"shown.bs.tab",relatedTarget:f[0]})}))}};a.prototype.activate=function(e,d,c){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",
!1);e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);q?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade");e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);c&&c()}var g=d.find("> .active"),q=c&&b.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&q?g.one("bsTransitionEnd",f).emulateTransitionEnd(a.TRANSITION_DURATION):f();g.removeClass("in")};
var e=b.fn.tab;b.fn.tab=d;b.fn.tab.Constructor=a;b.fn.tab.noConflict=function(){b.fn.tab=e;return this};var g=function(a){a.preventDefault();d.call(b(this),"show")};b(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',g).on("click.bs.tab.data-api",'[data-toggle="pill"]',g)}(jQuery);
+function(b){function d(e,d){return this.each(function(){var m=b(this),c=m.data("bs.modal"),f=b.extend({},a.DEFAULTS,m.data(),"object"==typeof e&&e);c||m.data("bs.modal",c=new a(this,f));if("string"==typeof e)c[e](d);else f.show&&c.show(d)})}var a=function(a,e){this.options=e;this.$body=b(document.body);this.$element=b(a);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom";
this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,b.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};a.VERSION="3.4.1";a.TRANSITION_DURATION=300;a.BACKDROP_TRANSITION_DURATION=150;a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};a.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};a.prototype.show=function(e){var d=this,m=b.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(m);this.isShown||m.isDefaultPrevented()||
(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',b.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(a){b(a.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var c=b.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body);
d.$element.show().scrollTop(0);d.adjustDialog();c&&d.$element[0].offsetWidth;d.$element.addClass("in");d.enforceFocus();var f=b.Event("shown.bs.modal",{relatedTarget:e});c?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(a.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))};a.prototype.hide=function(e){e&&e.preventDefault();e=b.Event("hide.bs.modal");this.$element.trigger(e);this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,
this.escape(),this.resize(),b(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),b.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",b.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())};a.prototype.enforceFocus=function(){b(document).off("focusin.bs.modal").on("focusin.bs.modal",b.proxy(function(a){document===
a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};a.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",b.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};a.prototype.resize=function(){if(this.isShown)b(window).on("resize.bs.modal",b.proxy(this.handleUpdate,this));else b(window).off("resize.bs.modal")};a.prototype.hideModal=
function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};a.prototype.backdrop=function(e){var d=this,m=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var c=b.support.transition&&m;this.$backdrop=b(document.createElement("div")).addClass("modal-backdrop "+
m).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",b.proxy(function(a){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this));c&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");e&&(c?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):e())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),m=function(){d.removeBackdrop();
e&&e()},b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",m).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):m()):e&&e()};a.prototype.handleUpdate=function(){this.adjustDialog()};a.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};a.prototype.resetAdjustments=
function(){this.$element.css({paddingLeft:"",paddingRight:""})};a.prototype.checkScrollbar=function(){var a=window.innerWidth;a||(a=document.documentElement.getBoundingClientRect(),a=a.right-Math.abs(a.left));this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};a.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var e=this.scrollbarWidth;this.bodyIsOverflowing&&
(this.$body.css("padding-right",a+e),b(this.fixedContent).each(function(a,c){a=c.style.paddingRight;var f=b(c).css("padding-right");b(c).data("padding-right",a).css("padding-right",parseFloat(f)+e+"px")}))};a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad);b(this.fixedContent).each(function(a,e){a=b(e).data("padding-right");b(e).removeData("padding-right");e.style.paddingRight=a?a:""})};a.prototype.measureScrollbar=function(){var a=document.createElement("div");
a.className="modal-scrollbar-measure";this.$body.append(a);var b=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return b};var e=b.fn.modal;b.fn.modal=d;b.fn.modal.Constructor=a;b.fn.modal.noConflict=function(){b.fn.modal=e;return this};b(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var e=b(this),m=e.attr("href"),c=e.attr("data-target")||m&&m.replace(/.*(?=#[^\s]+$)/,""),f=b(document).find(c),m=f.data("bs.modal")?"toggle":b.extend({remote:!/#/.test(m)&&m},f.data(),
e.data());e.is("a")&&a.preventDefault();f.one("show.bs.modal",function(a){if(!a.isDefaultPrevented())f.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})});d.call(f,m,this)})}(jQuery);
+function(b){var d=function(a,b){this.init("popover",a,b)};if(!b.fn.tooltip)throw Error("Popover requires tooltip.js");d.VERSION="3.4.1";d.DEFAULTS=b.extend({},b.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});d.prototype=b.extend({},b.fn.tooltip.Constructor.prototype);d.prototype.constructor=d;d.prototype.getDefaults=function(){return d.DEFAULTS};
d.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),d=this.getContent();if(this.options.html){var m=typeof d;this.options.sanitize&&(b=this.sanitizeHtml(b),"string"===m&&(d=this.sanitizeHtml(d)));a.find(".popover-title").html(b);a.find(".popover-content").children().detach().end()["string"===m?"html":"append"](d)}else a.find(".popover-title").text(b),a.find(".popover-content").children().detach().end().text(d);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||
a.find(".popover-title").hide()};d.prototype.hasContent=function(){return this.getTitle()||this.getContent()};d.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var a=b.fn.popover;b.fn.popover=function(a){return this.each(function(){var g=b(this),h=g.data("bs.popover"),m="object"==typeof a&&a;if(h||!/destroy|hide/.test(a))if(h||
g.data("bs.popover",h=new d(this,m)),"string"==typeof a)h[a]()})};b.fn.popover.Constructor=d;b.fn.popover.noConflict=function(){b.fn.popover=a;return this}}(jQuery);
(function(b){function d(a,b){b=jQuery("#"+b).position();jQuery("#iColorPicker").css({top:b.top+jQuery("#"+a).outerHeight()+"px",left:b.left+"px",position:"absolute"}).fadeIn("fast");jQuery("#iColorPickerBg").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).fadeIn("fast");b=jQuery("#"+a).val();jQuery("#color").val(b);b=jQuery("#iColorPicker");for(i=0;i<b.length;i++){var d=document.getElementById("hexSection"+i).childNodes;for(j=0;j<d.length;j++){var h=d[j].childNodes;for(k=0;k<h.length;k++)jQuery(d[j].childNodes[k]).unbind().mouseover(function(a){}).click(function(){var b=
"#"+jQuery(this).attr("hx");rm_h.user.setBGColor(b);jQuery("#"+a).val(b).css("background",b);jQuery("#iColorPickerBg").hide();jQuery("#iColorPicker").fadeOut();jQuery(this)})}}}jQuery.fn.iColorPicker=function(){this.each(function(a){0==a&&(jQuery(document.createElement("div")).attr("id","iColorPicker").css("display","none").html('<table class="pickerTable" id="pickerTable0"><thead id="hexSection0"><tr><td style="background:#f00;" hx="f00"></td><td style="background:#ff0" hx="ff0"></td><td style="background:#0f0" hx="0f0"></td><td style="background:#0ff" hx="0ff"></td><td style="background:#00f" hx="00f"></td><td style="background:#f0f" hx="f0f"></td><td style="background:#fff" hx="fff"></td><td style="background:#ebebeb" hx="ebebeb"></td><td style="background:#e1e1e1" hx="e1e1e1"></td><td style="background:#d7d7d7" hx="d7d7d7"></td><td style="background:#cccccc" hx="cccccc"></td><td style="background:#c2c2c2" hx="c2c2c2"></td><td style="background:#b7b7b7" hx="b7b7b7"></td><td style="background:#acacac" hx="acacac"></td><td style="background:#a0a0a0" hx="a0a0a0"></td><td style="background:#959595" hx="959595"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#898989" hx="898989"></td><td style="background:#7d7d7d" hx="7d7d7d"></td><td style="background:#707070" hx="707070"></td><td style="background:#626262" hx="626262"></td><td style="background:#555" hx="555"></td><td style="background:#464646" hx="464646"></td><td style="background:#363636" hx="363636"></td><td style="background:#262626" hx="262626"></td><td style="background:#111" hx="111"></td><td style="background:#000" hx="000"></td></tr><tr><td style="background:#f7977a" hx="f7977a"></td><td style="background:#fbad82" hx="fbad82"></td><td style="background:#fdc68c" hx="fdc68c"></td><td style="background:#fff799" hx="fff799"></td><td style="background:#c6df9c" hx="c6df9c"></td><td style="background:#a4d49d" hx="a4d49d"></td><td style="background:#81ca9d" hx="81ca9d"></td><td style="background:#7bcdc9" hx="7bcdc9"></td><td style="background:#6ccff7" hx="6ccff7"></td><td style="background:#7ca6d8" hx="7ca6d8"></td><td style="background:#8293ca" hx="8293ca"></td><td style="background:#8881be" hx="8881be"></td><td style="background:#a286bd" hx="a286bd"></td><td style="background:#bc8cbf" hx="bc8cbf"></td><td style="background:#f49bc1" hx="f49bc1"></td><td style="background:#f5999d" hx="f5999d"></td></tr><tr><td style="background:#f16c4d" hx="f16c4d"></td><td style="background:#f68e54" hx="f68e54"></td><td style="background:#fbaf5a" hx="fbaf5a"></td><td style="background:#fff467" hx="fff467"></td><td style="background:#acd372" hx="acd372"></td><td style="background:#7dc473" hx="7dc473"></td><td style="background:#39b778" hx="39b778"></td><td style="background:#16bcb4" hx="16bcb4"></td><td style="background:#00bff3" hx="00bff3"></td><td style="background:#438ccb" hx="438ccb"></td><td style="background:#5573b7" hx="5573b7"></td><td style="background:#5e5ca7" hx="5e5ca7"></td><td style="background:#855fa8" hx="855fa8"></td><td style="background:#a763a9" hx="a763a9"></td><td style="background:#ef6ea8" hx="ef6ea8"></td><td style="background:#f16d7e" hx="f16d7e"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#f16522" hx="f16522"></td><td style="background:#f7941d" hx="f7941d"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#8fc63d" hx="8fc63d"></td><td style="background:#37b44a" hx="37b44a"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00a99e" hx="00a99e"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#0072bc" hx="0072bc"></td><td style="background:#0054a5" hx="0054a5"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#652c91" hx="652c91"></td><td style="background:#91278f" hx="91278f"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#ee105a" hx="ee105a"></td></tr><tr><td style="background:#9d0a0f" hx="9d0a0f"></td><td style="background:#a1410d" hx="a1410d"></td><td style="background:#a36209" hx="a36209"></td><td style="background:#aba000" hx="aba000"></td><td style="background:#588528" hx="588528"></td><td style="background:#197b30" hx="197b30"></td><td style="background:#007236" hx="007236"></td><td style="background:#00736a" hx="00736a"></td><td style="background:#0076a4" hx="0076a4"></td><td style="background:#004a80" hx="004a80"></td><td style="background:#003370" hx="003370"></td><td style="background:#1d1363" hx="1d1363"></td><td style="background:#450e61" hx="450e61"></td><td style="background:#62055f" hx="62055f"></td><td style="background:#9e005c" hx="9e005c"></td><td style="background:#9d0039" hx="9d0039"></td></tr><tr><td style="background:#790000" hx="790000"></td><td style="background:#7b3000" hx="7b3000"></td><td style="background:#7c4900" hx="7c4900"></td><td style="background:#827a00" hx="827a00"></td><td style="background:#3e6617" hx="3e6617"></td><td style="background:#045f20" hx="045f20"></td><td style="background:#005824" hx="005824"></td><td style="background:#005951" hx="005951"></td><td style="background:#005b7e" hx="005b7e"></td><td style="background:#003562" hx="003562"></td><td style="background:#002056" hx="002056"></td><td style="background:#0c004b" hx="0c004b"></td><td style="background:#30004a" hx="30004a"></td><td style="background:#4b0048" hx="4b0048"></td><td style="background:#7a0045" hx="7a0045"></td><td style="background:#7a0026" hx="7a0026"></td></tr></thead><tbody></tbody></table><style>#iColorPicker input{margin:2px}</style>').appendTo("body"),
jQuery(document.createElement("div")).attr("id","iColorPickerBg").click(function(){jQuery("#iColorPickerBg").hide();jQuery("#iColorPicker").fadeOut()}).appendTo("body"),jQuery("table.pickerTable td").css({width:"12px",height:"14px",border:"1px solid #000",cursor:"pointer"}),jQuery("#iColorPicker table.pickerTable").css({"border-collapse":"collapse"}),jQuery("#iColorPicker").css({border:"1px solid #ccc",background:"#333",padding:"5px",color:"#fff","z-index":9999}));var b=this.id;a=jQuery('<button class="colorButton" id="icp_'+
b+'")">\x3c!----\x3e</button>');a.click(function(){d(b,"icp_"+b)});jQuery(this).css("backgroundColor",jQuery(this).val()).after(a)})}})(jQuery);
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(b,d){function a(a,c){this.container=a;this.options=c;this.init()}function e(a,c){this.widget=a;this.options=b.extend({},c);this.detectService();this.service&&this.init()}function g(a){function c(a,n){return n.toUpper()}var b={};a=a.data();for(var n in a){var f=a[n];"yes"===f?f=!0:"no"===f&&(f=!1);b[n.replace(/-(\w)/g,c)]=f}return b}function h(a,c){return m(a,c,encodeURIComponent)}function m(a,c,b){return a.replace(/\{([^}]+)\}/g,
function(a,f){return f in c?b?b(c[f]):c[f]:a})}function c(a,c){a=q+a;return a+" "+a+"_"+c}function f(a,c){function f(d){"keydown"===d.type&&27!==d.which||b(d.target).closest(a).length||(a.removeClass(y),n.off(e,f),b.isFunction(c)&&c())}var n=b(document),e="click touchstart keydown";n.on(e,f)}function u(a){if(document.documentElement.getBoundingClientRect){var c=parseInt(a.css("left"),10),b=parseInt(a.css("top"),10),n=a[0].getBoundingClientRect();10>n.left?a.css("left",10-n.left+c):n.right>window.innerWidth-
10&&a.css("left",window.innerWidth-n.right-10+c);10>n.top?a.css("top",10-n.top+b):n.bottom>window.innerHeight-10&&a.css("top",window.innerHeight-n.bottom-10+b)}a.addClass(y)}var q="social-likes__",y="social-likes_opened",z="https:"===location.protocol?"https:":"http:",t={facebook:{counterUrl:"https://graph.facebook.com/?id={url}",convertNumber:function(a){return a.share.share_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",popupWidth:600,popupHeight:359},twitter:{counters:!1,
popupUrl:"https://twitter.com/intent/tweet?url={url}&text={title}",popupWidth:600,popupHeight:250,click:function(){return/[.?:\-\u2013\u2014]\s*$/.test(this.options.title)||(this.options.title+=":"),!0}},mailru:{counterUrl:z+"//connect.mail.ru/share_count?url_list={url}&callback=1&func=?",convertNumber:function(a){for(var c in a)if(a.hasOwnProperty(c))return a[c].shares},popupUrl:"https://connect.mail.ru/share?share_url={url}&title={title}",popupWidth:492,popupHeight:500},vkontakte:{counterUrl:"https://vk.com/share.php?act=count&url={url}&index={index}",
counter:function(a,c){var f=t.vkontakte;f._||(f._=[],window.VK||(window.VK={}),window.VK.Share={count:function(a,c){f._[a].resolve(c)}});var n=f._.length;f._.push(c);b.getScript(h(a,{index:n})).fail(c.reject)},popupUrl:"https://vk.com/share.php?url={url}&title={title}",popupWidth:655,popupHeight:450},odnoklassniki:{counterUrl:z+"//connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",counter:function(a,c){var f=t.odnoklassniki;f._||(f._=[],window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(a,
c){f._[a].resolve(c)});var n=f._.length;f._.push(c);b.getScript(h(a,{index:n})).fail(c.reject)},popupUrl:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",popupWidth:580,popupHeight:336},plusone:{counterUrl:z+"//share.yandex.ru/gpp.xml?url={url}&callback=?",convertNumber:function(a){return parseInt(a.replace(/\D/g,""),10)},popupUrl:"https://plus.google.com/share?url={url}",popupWidth:500,popupHeight:550},pinterest:{counterUrl:z+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",
convertNumber:function(a){return a.count},popupUrl:"https://pinterest.com/pin/create/button/?url={url}&description={title}",popupWidth:740,popupHeight:550}},A={promises:{},fetch:function(a,c,f){A.promises[a]||(A.promises[a]={});var n=A.promises[a];if(!f.forceUpdate&&n[c])return n[c];var e=b.extend({},t[a],f),d=b.Deferred();a=e.counterUrl&&h(e.counterUrl,{url:c});return a&&b.isFunction(e.counter)?e.counter(a,d):e.counterUrl?b.getJSON(a).done(function(a){try{var c=a;b.isFunction(e.convertNumber)&&(c=
e.convertNumber(a));d.resolve(c)}catch(n){d.reject()}}).fail(d.reject):d.reject(),n[c]=d.promise(),n[c]}};b.fn.socialLikes=function(c){return this.each(function(){var f=b(this),e=f.data("social-likes");e?b.isPlainObject(c)&&e.update(c):(e=new a(f,b.extend({},b.fn.socialLikes.defaults,c,g(f))),f.data("social-likes",e))})};b.fn.socialLikes.defaults={url:window.location.href.replace(window.location.hash,""),title:document.title,counters:!0,zeroes:!1,wait:500,timeout:1E4,popupCheckInterval:500,singleTitle:"Share"};
a.prototype={init:function(){this.container.addClass("social-likes");this.single=this.container.hasClass("social-likes_single");this.initUserButtons();this.number=this.countersLeft=0;this.container.on("counter.social-likes",b.proxy(this.updateCounter,this));var a=this.container.children();this.makeSingleButton();this.buttons=[];a.each(b.proxy(function(a,c){a=new e(b(c),this.options);this.buttons.push(a);a.options.counterUrl&&this.countersLeft++},this));this.options.counters?(this.timer=setTimeout(b.proxy(this.appear,
this),this.options.wait),this.timeout=setTimeout(b.proxy(this.ready,this,!0),this.options.timeout)):this.appear()},initUserButtons:function(){!this.userButtonInited&&window.socialLikesButtons&&b.extend(!0,t,socialLikesButtons);this.userButtonInited=!0},makeSingleButton:function(){if(this.single){var a=this.container;a.addClass("social-likes_vertical");a.wrap(b("<div>",{class:"social-likes_single-w"}));a.wrapInner(b("<div>",{class:"social-likes__single-container"}));var e=a.parent(),d=b("<div>",{class:c("widget",
"single")}),n=b(m('<div class="{buttonCls}"><span class="{iconCls}"></span>{title}</div>',{buttonCls:c("button","single"),iconCls:c("icon","single"),title:this.options.singleTitle}));d.append(n);e.append(d);d.on("click",function(){return d.toggleClass("social-likes__widget_active"),d.hasClass("social-likes__widget_active")?(a.css({left:-(a.width()-d.width())/2,top:-a.height()}),u(a),f(a,function(){d.removeClass("social-likes__widget_active")})):a.removeClass(y),!1});this.widget=d}},update:function(a){if(a.forceUpdate||
a.url!==this.options.url){this.number=0;this.countersLeft=this.buttons.length;this.widget&&this.widget.find(".social-likes__counter").remove();b.extend(this.options,a);for(var c=0;c<this.buttons.length;c++)this.buttons[c].update(a)}},updateCounter:function(a,c,b){((b=b||0)||this.options.zeroes)&&(this.number+=b,this.single&&this.getCounterElem().text(this.number));this.countersLeft--;0===this.countersLeft&&(this.appear(),this.ready())},appear:function(){this.container.addClass("social-likes_visible")},
ready:function(a){this.timeout&&clearTimeout(this.timeout);this.container.addClass("social-likes_ready");a||this.container.trigger("ready.social-likes",this.number)},getCounterElem:function(){var a=this.widget.find("."+q+"counter_single");return a.length||(a=b("<span>",{class:c("counter","single")}),this.widget.append(a)),a}};e.prototype={init:function(){this.detectParams();this.initHtml();setTimeout(b.proxy(this.initCounter,this),0)},update:function(a){b.extend(this.options,{forceUpdate:!1},a);this.widget.find(".social-likes__counter").remove();
this.initCounter()},detectService:function(){var a=this.widget.data("service");if(!a){for(var c=this.widget[0],c=c.classList||c.className.split(" "),f=0;f<c.length;f++){var n=c[f];if(t[n]){a=n;break}}if(!a)return}this.service=a;b.extend(this.options,t[a])},detectParams:function(){var a=this.widget.data();if(a.counter){var c=parseInt(a.counter,10);isNaN(c)?this.options.counterUrl=a.counter:this.options.counterNumber=c}a.title&&(this.options.title=a.title);a.url&&(this.options.url=a.url)},initHtml:function(){var a=
this.options,c=this.widget,f=c.find("a");f.length&&this.cloneDataAttrs(f,c);f=b("<span>",{class:this.getElementClassNames("button"),html:c.html()});if(a.clickUrl)a=h(a.clickUrl,{url:a.url,title:a.title}),a=b("<a>",{href:a}),this.cloneDataAttrs(c,a),c.replaceWith(a),this.widget=c=a;else c.on("click",b.proxy(this.click,this));c.removeClass(this.service);c.addClass(this.getElementClassNames("widget"));f.prepend(b("<span>",{class:this.getElementClassNames("icon")}));c.empty().append(f);this.button=f},
initCounter:function(){this.options.counters&&(this.options.counterNumber?this.updateCounter(this.options.counterNumber):A.fetch(this.service,this.options.url,{counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate}).always(b.proxy(this.updateCounter,this)))},cloneDataAttrs:function(a,c){a=a.data();for(var b in a)a.hasOwnProperty(b)&&c.data(b,a[b])},getElementClassNames:function(a){return c(a,this.service)},updateCounter:function(a){a=parseInt(a,10)||0;var c={class:this.getElementClassNames("counter"),
text:a};a||this.options.zeroes||(c.class+=" social-likes__counter_empty",c.text="");c=b("<span>",c);this.widget.append(c);this.widget.trigger("counter.social-likes",[this.service,a])},click:function(a){var c=this.options,f=!0;if(b.isFunction(c.click)&&(f=c.click.call(this,a)),f)a=h(c.popupUrl,{url:c.url,title:c.title}),a=this.addAdditionalParamsToUrl(a),this.openPopup(a,{width:c.popupWidth,height:c.popupHeight});return!1},addAdditionalParamsToUrl:function(a){var c=b.param(b.extend(this.widget.data(),
this.options.data));if(b.isEmptyObject(c))return a;var f=-1===a.indexOf("?")?"?":"&";return a+f+c},openPopup:function(a,c){var f=window.screenTop!==d?window.screenTop:screen.top,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,e=Math.round((window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-c.width/2)+(window.screenLeft!==d?window.screenLeft:screen.left),
D=0;n>c.height&&(D=Math.round(n/3-c.height/2)+f);var g=window.open(a,"sl_"+this.service,"left="+e+",top="+D+",width="+c.width+",height="+c.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");if(g){g.focus();this.widget.trigger("popup_opened.social-likes",[this.service,g]);var u=setInterval(b.proxy(function(){g.closed&&(clearInterval(u),this.widget.trigger("popup_closed.social-likes",this.service))},this),this.options.popupCheckInterval)}else location.href=a}};b(function(){b(".social-likes").socialLikes()})});
$(function(){function b(){d=!0}document.addEventListener("touchmove",b,!1);document.addEventListener("scroll",b,!1);var d=!1;setTimeout(function(){try{if(!$.cookie("trSessionId")){var a=.12;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(a=.76);d&&(a=.86);if(Math.random()<a){var b=new Date((new Date).getTime()+3E5);$.cookie("trSessionId","0.2357"+b,{expires:b,path:"/"});$.ajax("/internal/js_errors",{data:{browser:navigator.userAgent,language:navigator.language,
text:"Failed to load resource: net::ERR_BLOCKED_BY_CLIENT: https://mc.yandex.ru/metrika/advert.gif"},type:"POST"})}}}catch(g){}},11900)});
(function(b,d,a){function e(a,c,n){a=d.createElement(a);c&&(a.id="cbox"+c);n&&(a.style.cssText=n);return b(a)}function g(){return a.innerHeight?a.innerHeight:b(a).height()}function h(a){var c=E.length;a=(G+a)%c;return 0>a?c+a:a}function m(a,c){return Math.round((/%/.test(a)?("x"===c?K.width():g())/100:1)*parseInt(a,10))}function c(c,n){return c.retinaUrl&&1<a.devicePixelRatio?n.replace(c.photoRegex,c.retinaSuffix):n}function f(a){"contains"in p[0]&&!p[0].contains(a.target)&&(a.stopPropagation(),p.focus())}
function u(){var a,c=b.data(H,"colorbox");null==c?(l=b.extend({},x),console&&console.log&&console.log("Error: cboxElement missing settings object")):l=b.extend({},c);for(a in l)b.isFunction(l[a])&&"on"!==a.slice(0,2)&&(l[a]=l[a].call(H));l.rel=l.rel||H.rel||b(H).data("rel")||"nofollow";l.href=l.href||b(H).attr("href");l.title=l.title||H.title;"string"===typeof l.href&&(l.href=b.trim(l.href))}function q(a,c){b(d).trigger(a);J.trigger(a);b.isFunction(c)&&c.call(H)}function y(a){if(!T){H=a;u();E=b(H);
G=0;"nofollow"!==l.rel&&(E=b(".cboxElement").filter(function(){var a=b.data(this,"colorbox"),c;a&&(c=b(this).data("rel")||a.rel||this.rel);return c===l.rel}),G=E.index(H),-1===G&&(E=E.add(H),G=E.length-1));r.css({opacity:parseFloat(l.opacity),cursor:l.overlayClose?"pointer":"auto",visibility:"visible"}).show();aa&&p.add(r).removeClass(aa);l.className&&p.add(r).addClass(l.className);aa=l.className;l.closeButton?Q.html(l.close).appendTo(w):Q.appendTo("<div/>");if(!L&&(L=U=!0,p.css({visibility:"hidden",
display:"block"}),F=e("div","LoadedContent","width:0; height:0; overflow:hidden"),w.css({width:"",height:""}).append(F),M=D.height()+Y.height()+w.outerHeight(!0)-w.height(),N=R.width()+S.width()+w.outerWidth(!0)-w.width(),O=F.outerHeight(!0),P=F.outerWidth(!0),l.w=m(l.initialWidth,"x"),l.h=m(l.initialHeight,"y"),F.css({width:"",height:l.h}),C.position(),q("cbox_open",l.onOpen),ba.add(I).hide(),p.focus(),l.trapFocus&&d.addEventListener&&(d.addEventListener("focus",f,!0),J.one("cbox_closed",function(){d.removeEventListener("focus",
f,!0)})),l.returnFocus))J.one("cbox_closed",function(){b(H).focus()});A()}}function z(){!p&&d.body&&(ca=!1,K=b(a),p=e("div").attr({id:"colorbox","class":!1===b.support.opacity?"cboxIE":"",role:"dialog",tabindex:"-1"}).hide(),r=e("div","Overlay").hide(),Z=b([e("div","LoadingOverlay")[0],e("div","LoadingGraphic")[0]]),n=e("div","Wrapper"),w=e("div","Content").append(I=e("div","Title"),da=e("div","Current"),V=b('<button type="button"/>').attr({id:"cboxPrevious"}),W=b('<button type="button"/>').attr({id:"cboxNext"}),
v=e("button","Slideshow"),Z),Q=b('<button type="button"/>').attr({id:"cboxClose"}),n.append(e("div").append(e("div","TopLeft"),D=e("div","TopCenter"),e("div","TopRight")),e("div",!1,"clear:left").append(R=e("div","MiddleLeft"),w,S=e("div","MiddleRight")),e("div",!1,"clear:left").append(e("div","BottomLeft"),Y=e("div","BottomCenter"),e("div","BottomRight"))).find("div div").css({"float":"left"}),X=e("div",!1,"position:absolute; width:9999px; visibility:hidden; display:none"),ba=W.add(V).add(da).add(v),
b(d.body).append(r,p.append(n,X)))}function t(){function a(c){1<c.which||c.shiftKey||c.altKey||c.metaKey||c.ctrlKey||(c.preventDefault(),y(this))}if(p){if(!ca)if(ca=!0,W.click(function(){C.next()}),V.click(function(){C.prev()}),Q.click(function(){C.close()}),r.click(function(){l.overlayClose&&C.close()}),b(d).bind("keydown.cbox",function(a){var c=a.keyCode;L&&l.escKey&&27===c&&(a.preventDefault(),C.close());L&&l.arrowKey&&E[1]&&!a.altKey&&(37===c?(a.preventDefault(),V.click()):39===c&&(a.preventDefault(),
W.click()))}),b.isFunction(b.fn.on))b(d).on("click.cbox",".cboxElement",a);else b(".cboxElement").live("click.cbox",a);return!0}return!1}function A(){var n,f,w=C.prep,D,g=++ea;U=!0;B=!1;H=E[G];u();q("cbox_purge");q("cbox_load",l.onLoad);l.h=l.height?m(l.height,"y")-O-M:l.innerHeight&&m(l.innerHeight,"y");l.w=l.width?m(l.width,"x")-P-N:l.innerWidth&&m(l.innerWidth,"x");l.mw=l.w;l.mh=l.h;l.maxWidth&&(l.mw=m(l.maxWidth,"x")-P-N,l.mw=l.w&&l.w<l.mw?l.w:l.mw);l.maxHeight&&(l.mh=m(l.maxHeight,"y")-O-M,l.mh=
l.h&&l.h<l.mh?l.h:l.mh);n=l.href;fa=setTimeout(function(){Z.show()},100);l.inline?(D=e("div").hide().insertBefore(b(n)[0]),J.one("cbox_purge",function(){D.replaceWith(F.children())}),w(b(n))):l.iframe?w(" "):l.html?w(l.html):l.photo||l.photoRegex.test(n)?(n=c(l,n),B=d.createElement("img"),b(B).addClass("cboxPhoto").bind("error",function(){l.title=!1;w(e("div","Error").html(l.imgError))}).one("load",function(){var c;g===ea&&(B.alt=b(H).attr("alt")||b(H).attr("data-alt")||"",l.retinaImage&&1<a.devicePixelRatio&&
(B.height/=a.devicePixelRatio,B.width/=a.devicePixelRatio),l.scalePhotos&&(f=function(){B.height-=B.height*c;B.width-=B.width*c},l.mw&&B.width>l.mw&&(c=(B.width-l.mw)/B.width,f()),l.mh&&B.height>l.mh&&(c=(B.height-l.mh)/B.height,f())),l.h&&(B.style.marginTop=Math.max(l.mh-B.height,0)/2+"px"),E[1]&&(l.loop||E[G+1])&&(B.style.cursor="pointer",B.onclick=function(){C.next()}),B.style.width=B.width+"px",B.style.height=B.height+"px",setTimeout(function(){w(B)},1))}),setTimeout(function(){B.src=n},1)):n&&
X.load(n,l.data,function(a,c){g===ea&&w("error"===c?e("div","Error").html(l.xhrError):b(this).contents())})}var x={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",
next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,trapFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0},
r,p,n,w,D,R,S,Y,E,K,F,X,Z,I,da,v,W,V,Q,ba,J=b("<a/>"),l,M,N,O,P,H,G,B,L,U,T,fa,C,aa,ea=0,ga={},ca,ha=function(){function a(){clearTimeout(w)}function c(){if(l.loop||E[G+1])a(),w=setTimeout(C.next,l.slideshowSpeed)}function n(){v.html(l.slideshowStop).unbind("click.cbox").one("click.cbox",b);J.bind("cbox_complete",c).bind("cbox_load",a);p.removeClass("cboxSlideshow_off").addClass("cboxSlideshow_on")}function b(){a();J.unbind("cbox_complete",c).unbind("cbox_load",a);v.html(l.slideshowStart).unbind("click.cbox").one("click.cbox",
function(){C.next();n()});p.removeClass("cboxSlideshow_on").addClass("cboxSlideshow_off")}function f(){e=!1;v.hide();a();J.unbind("cbox_complete",c).unbind("cbox_load",a);p.removeClass("cboxSlideshow_off cboxSlideshow_on")}var e,w;return function(){e?l.slideshow||(J.unbind("cbox_cleanup",f),f()):l.slideshow&&E[1]&&(e=!0,J.one("cbox_cleanup",f),l.slideshowAuto?n():b(),v.show())}}();b.colorbox||(b(z),C=b.fn.colorbox=b.colorbox=function(a,c){var n=this;a=a||{};z();if(t()){if(b.isFunction(n))n=b("<a/>"),
a.open=!0;else if(!n[0])return n;c&&(a.onComplete=c);n.each(function(){b.data(this,"colorbox",b.extend({},b.data(this,"colorbox")||x,a))}).addClass("cboxElement");(b.isFunction(a.open)&&a.open.call(n)||a.open)&&y(n[0])}return n},C.position=function(a,c){function f(){D[0].style.width=Y[0].style.width=w[0].style.width=parseInt(p[0].style.width,10)-N+"px";w[0].style.height=R[0].style.height=S[0].style.height=parseInt(p[0].style.height,10)-M+"px"}var e,d=0,u=0,q=p.offset(),h,y;K.unbind("resize.cbox");
p.css({top:-9E4,left:-9E4});h=K.scrollTop();y=K.scrollLeft();l.fixed?(q.top-=h,q.left-=y,p.css({position:"fixed"})):(d=h,u=y,p.css({position:"absolute"}));u=!1!==l.right?u+Math.max(K.width()-l.w-P-N-m(l.right,"x"),0):!1!==l.left?u+m(l.left,"x"):u+Math.round(Math.max(K.width()-l.w-P-N,0)/2);d=!1!==l.bottom?d+Math.max(g()-l.h-O-M-m(l.bottom,"y"),0):!1!==l.top?d+m(l.top,"y"):d+Math.round(Math.max(g()-l.h-O-M,0)/2);p.css({top:q.top,left:q.left,visibility:"visible"});n[0].style.width=n[0].style.height=
"9999px";e={width:l.w+P+N,height:l.h+O+M,top:d,left:u};if(a){var z=0;b.each(e,function(c){e[c]!==ga[c]&&(z=a)});a=z}ga=e;a||p.css(e);p.dequeue().animate(e,{duration:a||0,complete:function(){f();U=!1;n[0].style.width=l.w+P+N+"px";n[0].style.height=l.h+O+M+"px";l.reposition&&setTimeout(function(){K.bind("resize.cbox",C.position)},1);c&&c()},step:f})},C.resize=function(a){var c;L&&(a=a||{},a.width&&(l.w=m(a.width,"x")-P-N),a.innerWidth&&(l.w=m(a.innerWidth,"x")),F.css({width:l.w}),a.height&&(l.h=m(a.height,
"y")-O-M),a.innerHeight&&(l.h=m(a.innerHeight,"y")),a.innerHeight||a.height||(c=F.scrollTop(),F.css({height:"auto"}),l.h=F.height()),F.css({height:l.h}),c&&F.scrollTop(c),C.position("none"===l.transition?0:l.speed))},C.prep=function(a){function n(){l.w=l.w||F.width();l.w=l.mw&&l.mw<l.w?l.mw:l.w;return l.w}function f(){l.h=l.h||F.height();l.h=l.mh&&l.mh<l.h?l.mh:l.h;return l.h}if(L){var D,g="none"===l.transition?0:l.speed;F.empty().remove();F=e("div","LoadedContent").append(a);F.hide().appendTo(X.show()).css({width:n(),
overflow:l.scrolling?"auto":"hidden"}).css({height:f()}).prependTo(w);X.hide();b(B).css({"float":"none"});D=function(){function a(){!1===b.support.opacity&&p[0].style.removeAttribute("filter")}var n=E.length,f,w;L&&(w=function(){clearTimeout(fa);Z.hide();q("cbox_complete",l.onComplete)},I.html(l.title).add(F).show(),1<n?("string"===typeof l.current&&da.html(l.current.replace("{current}",G+1).replace("{total}",n)).show(),W[l.loop||G<n-1?"show":"hide"]().html(l.next),V[l.loop||G?"show":"hide"]().html(l.previous),
ha(),l.preloading&&b.each([h(-1),h(1)],function(){var a,n;n=E[this];var f=b.data(n,"colorbox");f&&f.href?(a=f.href,b.isFunction(a)&&(a=a.call(n))):a=b(n).attr("href");a&&(f.photo||f.photoRegex.test(a))&&(a=c(f,a),n=d.createElement("img"),n.src=a)})):ba.hide(),l.iframe?(f=e("iframe")[0],"frameBorder"in f&&(f.frameBorder=0),"allowTransparency"in f&&(f.allowTransparency="true"),l.scrolling||(f.scrolling="no"),b(f).attr({src:l.href,name:(new Date).getTime(),"class":"cboxIframe",allowFullScreen:!0,webkitAllowFullScreen:!0,
mozallowfullscreen:!0}).one("load",w).appendTo(F),J.one("cbox_purge",function(){f.src="//about:blank"}),l.fastIframe&&b(f).trigger("load")):w(),"fade"===l.transition?p.fadeTo(g,1,a):a())};"fade"===l.transition?p.fadeTo(g,0,function(){C.position(0,D)}):C.position(g,D)}},C.next=function(){!U&&E[1]&&(l.loop||E[G+1])&&(G=h(1),y(E[G]))},C.prev=function(){!U&&E[1]&&(l.loop||G)&&(G=h(-1),y(E[G]))},C.close=function(){L&&!T&&(T=!0,L=!1,q("cbox_cleanup",l.onCleanup),K.unbind(".cbox"),r.fadeTo(l.fadeOut||0,
0),p.stop().fadeTo(l.fadeOut||0,0,function(){p.add(r).css({opacity:1,cursor:"auto"}).hide();q("cbox_purge");F.empty().remove();setTimeout(function(){T=!1;q("cbox_closed",l.onClosed)},1)}))},C.remove=function(){p&&(p.stop(),b.colorbox.close(),p.stop().remove(),r.remove(),T=!1,p=null,b(".cboxElement").removeData("colorbox").removeClass("cboxElement"),b(d).unbind("click.cbox"))},C.element=function(){return b(H)},C.settings=x)})(jQuery,document,window);
$(function(){$(".expandable").each(function(){try{var b=$(this),d=1*b.attr("data-height");if(d&&d<b.height()-200){var a=$('<div class="background"><div class="open-border"> </div><div class="open"><span class="js-link"><i class="fa fa-angle-double-down"></i> \u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c</span></div></div>').click(function(){b.css("height","").removeClass("expanded")});b.append(a).css("height",d+"px").addClass("expanded")}}catch(e){}})});
$(function(){$("body").append('<a class="scroll-top hide hidden-xs" href="#"><i class="fa fa-lg fa-arrow-circle-up"></i> \u0412\u0432\u0435\u0440\u0445</a>');$(window).scroll(function(){var b=$(window).scrollTop();$(".scroll-top").toggle(800<b).css({opacity:b/2500})});$("a.scroll-top").click(function(){$(".scroll-top").hide();$("html, body").animate({scrollTop:0},500);return!1})});
(function(b){var d={init:function(a){return this.each(function(){this.self=b(this);d.destroy.call(this.self);this.opt=b.extend(!0,{},b.fn.raty.defaults,a);d._adjustCallback.call(this);d._adjustNumber.call(this);d._adjustHints.call(this);this.opt.score=d._adjustedScore.call(this,this.opt.score);"img"!==this.opt.starType&&d._adjustStarType.call(this);d._adjustPath.call(this);d._createStars.call(this);this.opt.cancel&&d._createCancel.call(this);this.opt.precision&&d._adjustPrecision.call(this);d._createScore.call(this);
d._apply.call(this,this.opt.score);d._setTitle.call(this,this.opt.score);d._target.call(this,this.opt.score);this.opt.readOnly?d._lock.call(this):(this.style.cursor="pointer",d._binds.call(this))})},_adjustCallback:function(){for(var a="number readOnly score scoreName target path".split(" "),b=0;b<a.length;b++)"function"===typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_adjustedScore:function(a){return a?d._between(a,0,this.opt.number):a},_adjustHints:function(){this.opt.hints||
(this.opt.hints=[]);if(this.opt.halfShow||this.opt.half)for(var a=this.opt.precision?10:2,b=0;b<this.opt.number;b++){var d=this.opt.hints[b];"[object Array]"!==Object.prototype.toString.call(d)&&(d=[d]);this.opt.hints[b]=[];for(var h=0;h<a;h++){var m=d[h],c=d[d.length-1];void 0===c&&(c=null);this.opt.hints[b][h]=void 0===m?c:m}}},_adjustNumber:function(){this.opt.number=d._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-
1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var a=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var b=0;b<a.length;b++)this.opt[a[b]]=this.opt[a[b]].replace(".","-")},_apply:function(a){d._fill.call(this,a);a&&(0<a&&this.score.val(a),d._roundStars.call(this,a))},_between:function(a,b,d){return Math.min(Math.max(parseFloat(a),b),d)},_binds:function(){this.cancel&&(d._bindOverCancel.call(this),d._bindClickCancel.call(this),
d._bindOutCancel.call(this));d._bindOver.call(this);d._bindClick.call(this);d._bindOut.call(this)},_bindClick:function(){var a=this;a.stars.on("click.raty",function(e){var g=!0,h=a.opt.half||a.opt.precision?a.self.data("score"):this.alt||b(this).data("alt");a.opt.click&&(g=a.opt.click.call(a,+h,e));if(g||void 0===g)a.opt.half&&!a.opt.precision&&(h=d._roundHalfScore.call(a,h)),d._apply.call(a,h)})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value");
a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var a=this;a.self.on("mouseleave.raty",function(b){var g=+a.score.val()||void 0;d._apply.call(a,g);d._target.call(a,g,b);d._resetTitle.call(a);a.opt.mouseout&&a.opt.mouseout.call(a,g,b)})},_bindOutCancel:function(){var a=this;a.cancel.on("mouseleave.raty",function(b){var g=a.opt.cancelOff;"img"!==a.opt.starType&&(g=a.opt.cancelClass+" "+g);d._setIcon.call(a,this,g);a.opt.mouseout&&(g=+a.score.val()||void 0,a.opt.mouseout.call(a,g,b))})},
_bindOver:function(){var a=this;a.stars.on(a.opt.half?"mousemove.raty":"mouseover.raty",function(b){var g=d._getScoreByPosition.call(a,b,this);d._fill.call(a,g);a.opt.half&&(d._roundStars.call(a,g,b),d._setTitle.call(a,g,b),a.self.data("score",g));d._target.call(a,g,b);a.opt.mouseover&&a.opt.mouseover.call(a,g,b)})},_bindOverCancel:function(){var a=this;a.cancel.on("mouseover.raty",function(b){var g=a.opt.path+a.opt.starOff,h=a.opt.cancelOn;"img"===a.opt.starType?a.stars.attr("src",g):(h=a.opt.cancelClass+
" "+h,a.stars.attr("class",g));d._setIcon.call(a,this,h);d._target.call(a,null,b);a.opt.mouseover&&a.opt.mouseover.call(a,null)})},_buildScoreField:function(){return b("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var a=this.opt.path+this.opt.cancelOff,e=b("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?e.attr({src:a,alt:"x"}):e.attr("data-alt","x").addClass(a);"left"===this.opt.cancelPlace?
this.self.prepend("&#160;").prepend(e):this.self.append("&#160;").append(e);this.cancel=e},_createScore:function(){var a=b(this.opt.targetScore);this.score=a.length?a:d._buildScoreField.call(this)},_createStars:function(){for(var a=1;a<=this.opt.number;a++){var e=d._nameForIndex.call(this,a),e={alt:a,src:this.opt.path+this.opt[e]};"img"!==this.opt.starType&&(e={"data-alt":a,"class":e.src});e.title=d._getHint.call(this,a);b("<"+this.opt.starType+" />",e).appendTo(this);this.opt.space&&this.self.append(a<
this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(a){b(this).text(a);b.error(a)},_fill:function(a){for(var b=0,g=1;g<=this.stars.length;g++){var h,m=this.stars[g-1];h=d._turnOn.call(this,g,a);if(this.opt.iconRange&&this.opt.iconRange.length>b){var c=this.opt.iconRange[b];h=d._getRangeIcon.call(this,c,h);g<=c.range&&d._setIcon.call(this,m,h);g===c.range&&b++}else h=this.opt[h?"starOn":"starOff"],d._setIcon.call(this,m,h)}},_getFirstDecimal:function(a){a=
a.toString().split(".")[1];var b=0;a&&(b=parseInt(a.charAt(0),10),"9999"===a.slice(1,5)&&b++);return b},_getRangeIcon:function(a,b){return b?a.on||this.opt.starOn:a.off||this.opt.starOff},_getScoreByPosition:function(a,e){var g=parseInt(e.alt||e.getAttribute("data-alt"),10);if(this.opt.half){var h=d._getWidth.call(this);a=parseFloat((a.pageX-b(e).offset().left)/h);g=g-1+a}return g},_getHint:function(a,b){if(0!==a&&!a)return this.opt.noRatedMsg;var g=d._getFirstDecimal.call(this,a),h=this.opt.hints[(Math.ceil(a)||
1)-1],m=h;b=!b||this.move;if(this.opt.precision)b&&(g=0===g?9:g-1),m=h[g];else if(this.opt.halfShow||this.opt.half)m=h[b&&0===g?1:5<g?1:0];return""===m?"":m||a},_getWidth:function(){var a=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));a||d._error.call(this,"Could not get the icon width!");return a},_lock:function(){var a=d._getHint.call(this,this.score.val());this.style.cursor="";this.title=a;this.score.prop("readonly",!0);this.stars.prop("title",a);this.cancel&&this.cancel.hide();
this.self.data("readonly",!0)},_nameForIndex:function(a){return this.opt.score&&this.opt.score>=a?"starOn":"starOff"},_resetTitle:function(a){for(a=0;a<this.opt.number;a++)this.stars[a].title=d._getHint.call(this,a+1)},_roundHalfScore:function(a){var b=parseInt(a,10);a=d._getFirstDecimal.call(this,a);0!==a&&(a=5<a?1:.5);return b+a},_roundStars:function(a,b){var g=(a%1).toFixed(2),h;b||this.move?h=.5<g?"starOn":"starHalf":g>this.opt.round.down&&(h="starOn",this.opt.halfShow&&g<this.opt.round.up?h=
"starHalf":g<this.opt.round.full&&(h="starOff"));h&&d._setIcon.call(this,this.stars[Math.ceil(a)-1],this.opt[h])},_setIcon:function(a,b){a["img"===this.opt.starType?"src":"className"]=this.opt.path+b},_setTarget:function(a,b){b&&(b=this.opt.targetFormat.toString().replace("{score}",b));a.is(":input")?a.val(b):a.html(b)},_setTitle:function(a,b){if(a){var g=parseInt(Math.ceil(a),10);this.stars[g-1].title=d._getHint.call(this,a,b)}},_target:function(a,e){if(this.opt.target){var g=b(this.opt.target);
g.length||d._error.call(this,"Target selector invalid or missing!");var h=e&&"mouseover"===e.type;void 0===a?a=this.opt.targetText:null===a?a=h?this.opt.cancelHint:this.opt.targetText:("hint"===this.opt.targetType?a=d._getHint.call(this,a,e):this.opt.precision&&(a=parseFloat(a).toFixed(1)),e=e&&"mousemove"===e.type,h||e||this.opt.targetKeep||(a=this.opt.targetText));d._setTarget.call(this,g,a)}},_turnOn:function(a,b){return this.opt.single?a===b:a<=b},_unlock:function(){this.style.cursor="pointer";
this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",!1);for(var a=0;a<this.opt.number;a++)this.stars[a].title=d._getHint.call(this,a+1);this.cancel&&this.cancel.css("display","")},cancel:function(a){return this.each(function(){var e=b(this);!0!==e.data("readonly")&&(d[a?"click":"score"].call(e,null),this.score.removeAttr("value"))})},click:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=d._adjustedScore.call(this,a),d._apply.call(this,
a),this.opt.click&&this.opt.click.call(this,a,b.Event("click")),d._target.call(this,a))})},destroy:function(){return this.each(function(){var a=b(this),d=a.data("raw");d?a.off(".raty").empty().css({cursor:d.style.cursor}).removeData("readonly"):a.data("raw",a.clone()[0])})},getScore:function(){var a=[],b;this.each(function(){b=this.score.val();a.push(b?+b:void 0)});return 1<a.length?a:a[0]},move:function(a){return this.each(function(){var e=parseInt(a,10),g=d._getFirstDecimal.call(this,a);e>=this.opt.number&&
(e=this.opt.number-1,g=10);var h=d._getWidth.call(this)/10,e=b(this.stars[e]),g=e.offset().left+h*g,g=b.Event("mousemove",{pageX:g});this.move=!0;e.trigger(g);this.move=!1})},readOnly:function(a){return this.each(function(){var e=b(this);e.data("readonly")!==a&&(a?(e.off(".raty").children(this.opt.starType).off(".raty"),d._lock.call(this)):(d._binds.call(this),d._unlock.call(this)),e.data("readonly",a))})},reload:function(){return d.set.call(this,{})},score:function(){var a=b(this);return arguments.length?
d.setScore.apply(a,arguments):d.getScore.call(a)},set:function(a){return this.each(function(){b(this).raty(b.extend({},this.opt,a))})},setScore:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=d._adjustedScore.call(this,a),d._apply.call(this,a),d._target.call(this,a))})}};b.fn.raty=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist!");else return d.init.apply(this,arguments)};b.fn.raty.defaults=
{cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",
starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}})(jQuery);
function addCowsRaty(b){$(b).raty({half:function(){return $(this).attr("data-half")||!1},halfShow:!0,score:function(){var b=$(this).attr("data-score")||0;log("score",b);return b},readOnly:function(){return"true"==$(this).attr("data-readOnly")},hints:["\u043e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e","\u043f\u043b\u043e\u0445\u043e","\u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e","\u0445\u043e\u0440\u043e\u0448\u043e","\u043e\u0442\u043b\u0438\u0447\u043d\u043e"],starType:"i",
click:function(b,a){a=$(this).attr("data-id");var e=$(this).attr("data-type"),g=$(this).attr("data-subject-id"),h=$(this).attr("data-rate-url"),m="#user_rate_"+a;$.ajax({url:h,data:{id:a,rating:b,type:e,subjectId:g},method:"POST",success:function(a){$(m).empty().append(a)},error:function(a,b){403==a.status?showNoty({text:"\u0414\u043b\u044f \u043e\u0446\u0435\u043d\u043a\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0435\u043d\u043d\u044b\u043c",
type:"error"}):(showNoty({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0447\u0442\u043e-\u0442\u043e \u0443\u0436\u0430\u0441\u043d\u043e\u0435",type:"error"}),log(a.responseText,a.status))}})}})}
(function(b,d){"function"===typeof define&&define.amd?define("sifter",d):"object"===typeof exports?module.exports=d():b.Sifter=d()})(this,function(){var b=function(a,c){this.items=a;this.settings=c||{diacritics:!0}};b.prototype.tokenize=function(a){a=(String(a||"").toLowerCase()+"").replace(/^\s+|\s+$|/g,"");if(!a||!a.length)return[];var c,b,d,e=[],h=a.split(/ +/);a=0;for(c=h.length;a<c;a++){b=(h[a]+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(this.settings.diacritics)for(d in g)g.hasOwnProperty(d)&&
(b=b.replace(new RegExp(d,"g"),g[d]));e.push({string:h[a],regex:new RegExp(b,"i")})}return e};b.prototype.iterator=function(a,c){(e(a)?Array.prototype.forEach||function(a){for(var c=0,b=this.length;c<b;c++)a(this[c],c,this)}:function(a){for(var c in this)this.hasOwnProperty(c)&&a(this[c],c,this)}).apply(a,[c])};b.prototype.getScoreFunction=function(a,c){var b,d,e;a=this.prepareSearch(a,c);d=a.tokens;b=a.options.fields;e=d.length;var g=function(a,c){var b;if(!a)return 0;a=String(a||"");b=a.search(c.regex);
if(-1===b)return 0;a=c.string.length/a.length;0===b&&(a+=.5);return a},h=function(){var a=b.length;return a?1===a?function(a,c){return g(c[b[0]],a)}:function(c,d){for(var e=0,u=0;e<a;e++)u+=g(d[b[e]],c);return u/a}:function(){return 0}}();return e?1===e?function(a){return h(d[0],a)}:"and"===a.options.conjunction?function(a){for(var c,b=0,f=0;b<e;b++){c=h(d[b],a);if(0>=c)return 0;f+=c}return f/e}:function(a){for(var c=0,b=0;c<e;c++)b+=h(d[c],a);return b/e}:function(){return 0}};b.prototype.getSortFunction=
function(a,c){var b,e,g,h,z,t,A,x,r;e=this;a=e.prepareSearch(a,c);r=!a.query&&c.sort_empty||c.sort;x=function(a,c){return"$score"===a?c.score:e.items[c.id][a]};h=[];if(r)for(c=0,b=r.length;c<b;c++)(a.query||"$score"!==r[c].field)&&h.push(r[c]);if(a.query){a=!0;c=0;for(b=h.length;c<b;c++)if("$score"===h[c].field){a=!1;break}a&&h.unshift({field:"$score",direction:"desc"})}else for(c=0,b=h.length;c<b;c++)if("$score"===h[c].field){h.splice(c,1);break}A=[];c=0;for(b=h.length;c<b;c++)A.push("desc"===h[c].direction?
-1:1);return(z=h.length)?1===z?(g=h[0].field,t=A[0],function(a,c){return t*d(x(g,a),x(g,c))}):function(a,c){var b,f;for(b=0;b<z;b++)if(f=h[b].field,f=A[b]*d(x(f,a),x(f,c)))return f;return 0}:null};b.prototype.prepareSearch=function(b,c){if("object"===typeof b)return b;c=a({},c);var f=c.fields,d=c.sort,g=c.sort_empty;f&&!e(f)&&(c.fields=[f]);d&&!e(d)&&(c.sort=[d]);g&&!e(g)&&(c.sort_empty=[g]);return{options:c,query:String(b||"").toLowerCase(),tokens:this.tokenize(b),total:0,items:[]}};b.prototype.search=
function(a,c){var b,d,e;d=this.prepareSearch(a,c);c=d.options;a=d.query;e=c.score||this.getScoreFunction(d);a.length?this.iterator(this.items,function(a,g){b=e(a);(!1===c.filter||0<b)&&d.items.push({score:b,id:g})}):this.iterator(this.items,function(a,c){d.items.push({score:1,id:c})});(a=this.getSortFunction(d,c))&&d.items.sort(a);d.total=d.items.length;"number"===typeof c.limit&&(d.items=d.items.slice(0,c.limit));return d};var d=function(a,c){if("number"===typeof a&&"number"===typeof c)return a>
c?1:a<c?-1:0;a=h(String(a||""));c=h(String(c||""));return a>c?1:c>a?-1:0},a=function(a,c){var b,d,e,g;b=1;for(d=arguments.length;b<d;b++)if(g=arguments[b])for(e in g)g.hasOwnProperty(e)&&(a[e]=g[e]);return a},e=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g={a:"[a\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u0100\u0101\u0105\u0104]",c:"[c\u00c7\u00e7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\u00c8\u00c9\u00ca\u00cb\u00e8\u00e9\u00ea\u00eb\u011b\u011a\u0112\u0113\u0119\u0118]",
i:"[i\u00cc\u00cd\u00ce\u00cf\u00ec\u00ed\u00ee\u00ef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\u00d1\u00f1\u0148\u0147\u0144\u0143]",o:"[o\u00d2\u00d3\u00d4\u00d5\u00d5\u00d6\u00d8\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\u00d9\u00da\u00db\u00dc\u00f9\u00fa\u00fb\u00fc\u016f\u016e\u016a\u016b]",y:"[y\u0178\u00ff\u00fd\u00dd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},h=function(){var a,c,b,d,e="",h={};for(b in g)if(g.hasOwnProperty(b))for(d=
g[b].substring(2,g[b].length-1),e+=d,a=0,c=d.length;a<c;a++)h[d.charAt(a)]=b;var z=new RegExp("["+e+"]","g");return function(a){return a.replace(z,function(a){return h[a]}).toLowerCase()}}();return b});
(function(b,d){"function"===typeof define&&define.amd?define("microplugin",d):"object"===typeof exports?module.exports=d():b.MicroPlugin=d()})(this,function(){var b={isArray:Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}};return{mixin:function(d){d.plugins={};d.prototype.initializePlugins=function(a){var d,g,h=[];this.plugins={names:[],settings:{},requested:{},loaded:{}};if(b.isArray(a))for(d=0,g=a.length;d<g;d++)"string"===typeof a[d]?h.push(a[d]):(this.plugins.settings[a[d].name]=
a[d].options,h.push(a[d].name));else if(a)for(d in a)a.hasOwnProperty(d)&&(this.plugins.settings[d]=a[d],h.push(d));for(;h.length;)this.require(h.shift())};d.prototype.loadPlugin=function(a){var b=this.plugins,g=d.plugins[a];if(!d.plugins.hasOwnProperty(a))throw Error('Unable to find "'+a+'" plugin');b.requested[a]=!0;b.loaded[a]=g.fn.apply(this,[this.plugins.settings[a]||{}]);b.names.push(a)};d.prototype.require=function(a){var b=this.plugins;if(!this.plugins.loaded.hasOwnProperty(a)){if(b.requested[a])throw Error('Plugin has circular dependency ("'+
a+'")');this.loadPlugin(a)}return b.loaded[a]};d.define=function(a,b){d.plugins[a]={name:a,fn:b}}}}});
(function(b,d){"function"===typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],d):"object"===typeof exports?module.exports=d(require("jquery"),require("sifter"),require("microplugin")):b.Selectize=d(b.jQuery,b.Sifter,b.MicroPlugin)})(this,function(b,d,a){var e=function(a,c){if("string"!==typeof c||c.length){var b="string"===typeof c?new RegExp(c,"i"):c,f=function(a){var c=0;if(3===a.nodeType){var n=a.data.search(b);if(0<=n&&0<a.data.length){var d=a.data.match(b),c=document.createElement("span");
c.className="highlight";a=a.splitText(n);a.splitText(d[0].length);n=a.cloneNode(!0);c.appendChild(n);a.parentNode.replaceChild(c,a);c=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(n=0;n<a.childNodes.length;++n)n+=f(a.childNodes[n]);return c};return a.each(function(){f(this)})}},g=function(){};g.prototype={on:function(a,c){this._events=this._events||{};this._events[a]=this._events[a]||[];this._events[a].push(c)},off:function(a,c){var b=arguments.length;if(0===b)return delete this._events;
if(1===b)return delete this._events[a];this._events=this._events||{};!1!==a in this._events&&this._events[a].splice(this._events[a].indexOf(c),1)},trigger:function(a){this._events=this._events||{};if(!1!==a in this._events)for(var c=0;c<this._events[a].length;c++)this._events[a][c].apply(this,Array.prototype.slice.call(arguments,1))}};g.mixin=function(a){for(var c=["on","off","trigger"],b=0;b<c.length;b++)a.prototype[c[b]]=g.prototype[c[b]]};var h=/Mac/.test(navigator.userAgent),m=h?91:17,c=h?18:
17,f=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,u=function(a){return"undefined"===typeof a||null===a?null:"boolean"===typeof a?a?"1":"0":a+""},q=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},y={before:function(a,c,b){var f=a[c];a[c]=function(){b.apply(a,arguments);return f.apply(a,arguments)}},after:function(a,c,b){var f=a[c];a[c]=function(){var c=f.apply(a,arguments);b.apply(a,arguments);
return c}}},z=function(a){var c=!1;return function(){c||(c=!0,a.apply(this,arguments))}},t=function(a,c){var b;return function(){var f=this,d=arguments;window.clearTimeout(b);b=window.setTimeout(function(){a.apply(f,d)},c)}},A=function(a,c,b){var f,d=a.trigger,e={};a.trigger=function(){var b=arguments[0];if(-1!==c.indexOf(b))e[b]=arguments;else return d.apply(a,arguments)};b.apply(a,[]);a.trigger=d;for(f in e)e.hasOwnProperty(f)&&d.apply(a,e[f])},x=function(a,c,b,f){a.on(c,b,function(c){for(var b=
c.target;b&&b.parentNode!==a[0];)b=b.parentNode;c.currentTarget=b;return f.apply(this,[c])})},r=function(a){var c={};if("selectionStart"in a)c.start=a.selectionStart,c.length=a.selectionEnd-c.start;else if(document.selection){a.focus();var b=document.selection.createRange(),f=document.selection.createRange().text.length;b.moveStart("character",-a.value.length);c.start=b.text.length-f;c.length=f}return c},p=function(a,c){var f,e;e=a[0];e.selectize=this;f=(f=(f=window.getComputedStyle&&window.getComputedStyle(e,
null))?f.getPropertyValue("direction"):e.currentStyle&&e.currentStyle.direction)||a.parents("[dir]:first").attr("dir")||"";b.extend(this,{order:0,settings:c,$input:a,tabIndex:a.attr("tabindex")||"",tagType:"select"===e.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(f),eventNS:".selectize"+ ++p.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:a.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,
ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===c.loadThrottle?this.onSearchChange:t(this.onSearchChange,c.loadThrottle)});this.sifter=new d(this.options,{diacritics:c.diacritics});if(this.settings.options){a=0;for(c=this.settings.options.length;a<c;a++)this.registerOption(this.settings.options[a]);delete this.settings.options}if(this.settings.optgroups){a=
0;for(c=this.settings.optgroups.length;a<c;a++)this.registerOptionGroup(this.settings.optgroups[a]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi");"boolean"!==typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode);this.initializePlugins(this.settings.plugins);this.setupCallbacks();this.setupTemplates();this.setup()};g.mixin(p);a.mixin(p);b.extend(p.prototype,{setup:function(){var a=this,d=a.settings,
e=a.eventNS,g=b(window),u=b(document),q=a.$input,z,y,p,r,t,I;t=a.settings.mode;I=q.attr("class")||"";z=b("<div>").addClass(d.wrapperClass).addClass(I).addClass(t);y=b("<div>").addClass(d.inputClass).addClass("items").appendTo(z);p=b('<input type="text" autocomplete="off" />').appendTo(y).attr("tabindex",q.is(":disabled")?"-1":a.tabIndex);r=b(d.dropdownParent||z);r=b("<div>").addClass(d.dropdownClass).addClass(t).hide().appendTo(r);t=b("<div>").addClass(d.dropdownContentClass).appendTo(r);a.settings.copyClassesToDropdown&&
r.addClass(I);z.css({width:q[0].style.width});a.plugins.names.length&&(I="plugin-"+a.plugins.names.join(" plugin-"),z.addClass(I),r.addClass(I));(null===d.maxItems||1<d.maxItems)&&1===a.tagType&&q.attr("multiple","multiple");a.settings.placeholder&&p.attr("placeholder",d.placeholder);!a.settings.splitOn&&a.settings.delimiter&&(I=a.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),a.settings.splitOn=new RegExp("\\s*"+I+"+\\s*"));q.attr("autocorrect")&&p.attr("autocorrect",q.attr("autocorrect"));
q.attr("autocapitalize")&&p.attr("autocapitalize",q.attr("autocapitalize"));a.$wrapper=z;a.$control=y;a.$control_input=p;a.$dropdown=r;a.$dropdown_content=t;r.on("mouseenter","[data-selectable]",function(){return a.onOptionHover.apply(a,arguments)});r.on("mousedown click","[data-selectable]",function(){return a.onOptionSelect.apply(a,arguments)});x(y,"mousedown","*:not(input)",function(){return a.onItemSelect.apply(a,arguments)});y.on({mousedown:function(){return a.onMouseDown.apply(a,arguments)},
click:function(){return a.onClick.apply(a,arguments)}});p.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return a.onKeyDown.apply(a,arguments)},keyup:function(){return a.onKeyUp.apply(a,arguments)},keypress:function(){return a.onKeyPress.apply(a,arguments)},resize:function(){a.positionDropdown.apply(a,[])},blur:function(){return a.onBlur.apply(a,arguments)},focus:function(){a.ignoreBlur=!1;return a.onFocus.apply(a,arguments)},paste:function(){return a.onPaste.apply(a,arguments)}});
u.on("keydown"+e,function(c){a.isCmdDown=c[h?"metaKey":"ctrlKey"];a.isCtrlDown=c[h?"altKey":"ctrlKey"];a.isShiftDown=c.shiftKey});u.on("keyup"+e,function(b){b.keyCode===c&&(a.isCtrlDown=!1);16===b.keyCode&&(a.isShiftDown=!1);b.keyCode===m&&(a.isCmdDown=!1)});u.on("mousedown"+e,function(c){if(a.isFocused){if(c.target===a.$dropdown[0]||c.target.parentNode===a.$dropdown[0])return!1;a.$control.has(c.target).length||c.target===a.$control[0]||a.blur(c.target)}});g.on(["scroll"+e,"resize"+e].join(" "),function(){a.isOpen&&
a.positionDropdown.apply(a,arguments)});g.on("mousemove"+e,function(){a.ignoreHover=!1});this.revertSettings={$children:q.children().detach(),tabindex:q.attr("tabindex")};q.attr("tabindex",-1).hide().after(a.$wrapper);b.isArray(d.items)&&(a.setValue(d.items),delete d.items);if(f)q.on("invalid"+e,function(c){c.preventDefault();a.isInvalid=!0;a.refreshState()});a.updateOriginalInput();a.refreshItems();a.refreshState();a.updatePlaceholder();a.isSetup=!0;q.is(":disabled")&&a.disable();a.on("change",this.onChange);
q.data("selectize",a);q.addClass("selectized");a.trigger("initialize");if(!0===d.preload)a.onSearchChange("")},setupTemplates:function(){var a=this.settings.labelField,c=this.settings.optgroupLabelField;this.settings.render=b.extend({},{optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[c])+"</div>"},option:function(c,b){return'<div class="option">'+b(c[a])+"</div>"},item:function(c,b){return'<div class="item">'+
b(c[a])+"</div>"},option_create:function(a,c){return'<div class="create">Add <strong>'+c(a.input)+"</strong>&hellip;</div>"}},this.settings.render)},setupCallbacks:function(){var a,c,b={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",
dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(a in b)if(b.hasOwnProperty(a)&&(c=this.settings[b[a]]))this.on(a,c)},onClick:function(a){this.isFocused||(this.focus(),a.preventDefault())},onMouseDown:function(a){var c=this,f=a.isDefaultPrevented();b(a.target);if(c.isFocused){if(a.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():f||c.setActiveItem(null),!1}else f||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},
onPaste:function(a){var c=this;c.isFull()||c.isInputHidden||c.isLocked?a.preventDefault():setTimeout(function(){if(c.settings.splitOn)for(var f=b.trim(c.$control_input.val()||"").split(c.settings.splitOn),d=0,e=f.length;d<e;d++)c.createItem(f[d]);c.onKeyUp(a)},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var c=String.fromCharCode(a.keyCode||a.which);if(this.settings.create&&"multi"===this.settings.mode&&c===this.settings.delimiter)return this.createItem(),a.preventDefault(),
!1},onKeyDown:function(a){if(this.isLocked)9!==a.keyCode&&a.preventDefault();else{switch(a.keyCode){case 65:if(this.isCmdDown){this.selectAll();return}break;case 27:this.isOpen&&(a.preventDefault(),a.stopPropagation(),this.close());return;case 78:if(!a.ctrlKey||a.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var c=this.getAdjacentOption(this.$activeOption,1);c.length&&this.setActiveOption(c,!0,!0)}a.preventDefault();return;case 80:if(!a.ctrlKey||
a.altKey)break;case 38:this.$activeOption&&(this.ignoreHover=!0,c=this.getAdjacentOption(this.$activeOption,-1),c.length&&this.setActiveOption(c,!0,!0));a.preventDefault();return;case 13:this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),a.preventDefault());return;case 37:this.advanceSelection(-1,a);return;case 39:this.advanceSelection(1,a);return;case 9:this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),
this.isFull()||a.preventDefault());this.settings.create&&this.createItem()&&a.preventDefault();return;case 8:case 46:this.deleteSelection(a);return}!this.isFull()&&!this.isInputHidden||(h?a.metaKey:a.ctrlKey)||a.preventDefault()}},onKeyUp:function(a){if(this.isLocked)return a&&a.preventDefault();a=this.$control_input.val()||"";this.lastValue!==a&&(this.lastValue=a,this.onSearchChange(a),this.refreshOptions(),this.trigger("type",a))},onSearchChange:function(a){var c=this,b=c.settings.load;b&&!c.loadedSearches.hasOwnProperty(a)&&
(c.loadedSearches[a]=!0,c.load(function(f){b.apply(c,[a,f])}))},onFocus:function(a){var c=this.isFocused;if(this.isDisabled)return this.blur(),a&&a.preventDefault(),!1;if(!this.ignoreFocus){this.isFocused=!0;if("focus"===this.settings.preload)this.onSearchChange("");c||this.trigger("focus");this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus));this.refreshState()}},onBlur:function(a,c){var b=this;b.isFocused&&(b.isFocused=!1,b.ignoreFocus||
(b.ignoreBlur||document.activeElement!==b.$dropdown_content[0]?(a=function(){b.close();b.setTextboxValue("");b.setActiveItem(null);b.setActiveOption(null);b.setCaret(b.items.length);b.refreshState();(c||document.body).focus();b.ignoreFocus=!1;b.trigger("blur")},b.ignoreFocus=!0,b.settings.create&&b.settings.createOnBlur?b.createItem(null,!1,a):a()):(b.ignoreBlur=!0,b.onFocus(a))))},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(a){var c,
f=this;a.preventDefault&&(a.preventDefault(),a.stopPropagation());c=b(a.currentTarget);c.hasClass("create")?f.createItem(null,function(){f.settings.closeAfterSelect&&f.close()}):(c=c.attr("data-value"),"undefined"!==typeof c&&(f.lastQuery=null,f.setTextboxValue(""),f.addItem(c),f.settings.closeAfterSelect?f.close():!f.settings.hideSelected&&a.type&&/mouse/.test(a.type)&&f.setActiveOption(f.getOption(c))))},onItemSelect:function(a){this.isLocked||"multi"!==this.settings.mode||(a.preventDefault(),this.setActiveItem(a.currentTarget,
a))},load:function(a){var c=this,b=c.$wrapper.addClass(c.settings.loadingClass);c.loading++;a.apply(c,[function(a){c.loading=Math.max(c.loading-1,0);a&&a.length&&(c.addOption(a),c.refreshOptions(c.isFocused&&!c.isInputHidden));c.loading||b.removeClass(c.settings.loadingClass);c.trigger("load",a)}])},setTextboxValue:function(a){var c=this.$control_input;c.val()!==a&&(c.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:
this.items.join(this.settings.delimiter)},setValue:function(a,c){A(this,c?[]:["change"],function(){this.clear(c);this.addItems(a,c)})},setActiveItem:function(a,c){var f,d;if("single"!==this.settings.mode)if(a=b(a),a.length){f=c&&c.type.toLowerCase();if("mousedown"===f&&this.isShiftDown&&this.$activeItems.length){f=this.$control.children(".active:last");f=Array.prototype.indexOf.apply(this.$control[0].childNodes,[f[0]]);a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[a[0]]);f>a&&(d=f,
f=a,a=d);for(;f<=a;f++)d=this.$control[0].childNodes[f],-1===this.$activeItems.indexOf(d)&&(b(d).addClass("active"),this.$activeItems.push(d));c.preventDefault()}else"mousedown"===f&&this.isCtrlDown||"keydown"===f&&this.isShiftDown?a.hasClass("active")?(c=this.$activeItems.indexOf(a[0]),this.$activeItems.splice(c,1),a.removeClass("active")):this.$activeItems.push(a.addClass("active")[0]):(b(this.$activeItems).removeClass("active"),this.$activeItems=[a.addClass("active")[0]]);this.hideInput();this.isFocused||
this.focus()}else b(this.$activeItems).removeClass("active"),this.$activeItems=[],this.isFocused&&this.showInput()},setActiveOption:function(a,c,f){var d,e,g;this.$activeOption&&this.$activeOption.removeClass("active");this.$activeOption=null;a=b(a);a.length&&(this.$activeOption=a.addClass("active"),c||"undefined"===typeof c)&&(a=this.$dropdown_content.height(),d=this.$activeOption.outerHeight(!0),c=this.$dropdown_content.scrollTop()||0,e=this.$activeOption.offset().top-this.$dropdown_content.offset().top+
c,g=e-a+d,e+d>a+c?this.$dropdown_content.stop().animate({scrollTop:g},f?this.settings.scrollDuration:0):e<c&&this.$dropdown_content.stop().animate({scrollTop:e},f?this.settings.scrollDuration:0))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue("");this.$control_input.css({opacity:0,
position:"absolute",left:this.rtl?1E4:-1E4});this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0});this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1;a.onFocus()},0))},blur:function(a){this.$control_input[0].blur();this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=
this.settings,c=a.sortField;"string"===typeof c&&(c=[{field:c}]);return{fields:a.searchField,conjunction:a.searchConjunction,sort:c}},search:function(a){var c,f;c=this.settings;var d=this.getSearchOptions();if(c.score&&(f=this.settings.score.apply(this,[a]),"function"!==typeof f))throw Error('Selectize "score" setting must be a function that returns a function');a!==this.lastQuery?(this.lastQuery=a,this.currentResults=a=this.sifter.search(a,b.extend(d,{score:f}))):a=b.extend(!0,{},this.currentResults);
if(c.hideSelected)for(c=a.items.length-1;0<=c;c--)-1!==this.items.indexOf(u(a.items[c].id))&&a.items.splice(c,1);return a},refreshOptions:function(a){var c,f,d,g,q,h,m,z,y,p,r,x;"undefined"===typeof a&&(a=!0);var v=this;r=b.trim(v.$control_input.val());var t=v.search(r),A=v.$dropdown_content,Q=v.$activeOption&&u(v.$activeOption.attr("data-value"));g=t.items.length;"number"===typeof v.settings.maxOptions&&(g=Math.min(g,v.settings.maxOptions));q={};h=[];for(c=0;c<g;c++)for(m=v.options[t.items[c].id],
z=v.render("option",m),m=m[v.settings.optgroupField]||"",y=b.isArray(m)?m:[m],f=0,d=y&&y.length;f<d;f++)m=y[f],v.optgroups.hasOwnProperty(m)||(m=""),q.hasOwnProperty(m)||(q[m]=[],h.push(m)),q[m].push(z);this.settings.lockOptgroupOrder&&h.sort(function(a,c){return(v.optgroups[a].$order||0)-(v.optgroups[c].$order||0)});z=[];c=0;for(g=h.length;c<g;c++)m=h[c],v.optgroups.hasOwnProperty(m)&&q[m].length?(f=v.render("optgroup_header",v.optgroups[m])||"",f+=q[m].join(""),z.push(v.render("optgroup",b.extend({},
v.optgroups[m],{html:f})))):z.push(q[m].join(""));A.html(z.join(""));if(v.settings.highlight&&t.query.length&&t.tokens.length)for(c=0,g=t.tokens.length;c<g;c++)e(A,t.tokens[c].regex);if(!v.settings.hideSelected)for(c=0,g=v.items.length;c<g;c++)v.getOption(v.items[c]).addClass("selected");if(c=v.canCreate(r))A.prepend(v.render("option_create",{input:r})),x=b(A[0].childNodes[0]);v.hasOptions=0<t.items.length||c;v.hasOptions?(0<t.items.length?((r=Q&&v.getOption(Q))&&r.length?p=r:"single"===v.settings.mode&&
v.items.length&&(p=v.getOption(v.items[0])),p&&p.length||(p=x&&!v.settings.addPrecedence?v.getAdjacentOption(x,1):A.find("[data-selectable]:first"))):p=x,v.setActiveOption(p),a&&!v.isOpen&&v.open()):(v.setActiveOption(null),a&&v.isOpen&&v.close())},addOption:function(a){var c,f;if(b.isArray(a))for(c=0,f=a.length;c<f;c++)this.addOption(a[c]);else if(c=this.registerOption(a))this.userOptions[c]=!0,this.lastQuery=null,this.trigger("option_add",c,a)},registerOption:function(a){var c=u(a[this.settings.valueField]);
if(!c||this.options.hasOwnProperty(c))return!1;a.$order=a.$order||++this.order;this.options[c]=a;return c},registerOptionGroup:function(a){var c=u(a[this.settings.optgroupValueField]);if(!c)return!1;a.$order=a.$order||++this.order;this.optgroups[c]=a;return c},addOptionGroup:function(a,c){c[this.settings.optgroupValueField]=a;(a=this.registerOptionGroup(c))&&this.trigger("optgroup_add",a,c)},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache=
{},this.trigger("optgroup_remove",a))},clearOptionGroups:function(){this.optgroups={};this.renderCache={};this.trigger("optgroup_clear")},updateOption:function(a,c){var f,d,e;a=u(a);f=u(c[this.settings.valueField]);if(null!==a&&this.options.hasOwnProperty(a)){if("string"!==typeof f)throw Error("Value must be set in option data");e=this.options[a].$order;f!==a&&(delete this.options[a],d=this.items.indexOf(a),-1!==d&&this.items.splice(d,1,f));c.$order=c.$order||e;this.options[f]=c;d=this.renderCache.item;
e=this.renderCache.option;d&&(delete d[a],delete d[f]);e&&(delete e[a],delete e[f]);-1!==this.items.indexOf(f)&&(a=this.getItem(a),c=b(this.render("item",c)),a.hasClass("active")&&c.addClass("active"),a.replaceWith(c));this.lastQuery=null;this.isOpen&&this.refreshOptions(!1)}},removeOption:function(a,c){a=u(a);var b=this.renderCache.item,f=this.renderCache.option;b&&delete b[a];f&&delete f[a];delete this.userOptions[a];delete this.options[a];this.lastQuery=null;this.trigger("option_remove",a);this.removeItem(a,
c)},clearOptions:function(){this.loadedSearches={};this.userOptions={};this.renderCache={};this.options=this.sifter.items={};this.lastQuery=null;this.trigger("option_clear");this.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(a,c){var f=this.$dropdown.find("[data-selectable]");a=f.index(a)+c;return 0<=a&&a<f.length?f.eq(a):b()},getElementWithValue:function(a,c){a=u(a);if("undefined"!==typeof a&&null!==
a)for(var f=0,d=c.length;f<d;f++)if(c[f].getAttribute("data-value")===a)return b(c[f]);return b()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(a,c){a=b.isArray(a)?a:[a];for(var f=0,d=a.length;f<d;f++)this.isPending=f<d-1,this.addItem(a[f],c)},addItem:function(a,c){A(this,c?[]:["change"],function(){var f,d,e,g=this.settings.mode;a=u(a);-1!==this.items.indexOf(a)?"single"===g&&this.close():this.options.hasOwnProperty(a)&&("single"===g&&this.clear(c),
"multi"===g&&this.isFull()||(f=b(this.render("item",this.options[a])),e=this.isFull(),this.items.splice(this.caretPos,0,a),this.insertAtCaret(f),(!this.isPending||!e&&this.isFull())&&this.refreshState(),this.isSetup&&(e=this.$dropdown_content.find("[data-selectable]"),this.isPending||(d=this.getOption(a),d=this.getAdjacentOption(d,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==g),d&&this.setActiveOption(this.getOption(d))),!e.length||this.isFull()?this.close():this.positionDropdown(),
this.updatePlaceholder(),this.trigger("item_add",a,f),this.updateOriginalInput({silent:c}))))})},removeItem:function(a,c){var b,f,d;b="object"===typeof a?a:this.getItem(a);a=u(b.attr("data-value"));f=this.items.indexOf(a);-1!==f&&(b.remove(),b.hasClass("active")&&(d=this.$activeItems.indexOf(b[0]),this.$activeItems.splice(d,1)),this.items.splice(f,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(a)&&this.removeOption(a,c),f<this.caretPos&&this.setCaret(this.caretPos-
1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:c}),this.positionDropdown(),this.trigger("item_remove",a,b))},createItem:function(a,c){var f=this,d=f.caretPos;a=a||b.trim(f.$control_input.val()||"");var e=arguments[arguments.length-1];"function"!==typeof e&&(e=function(){});"boolean"!==typeof c&&(c=!0);if(!f.canCreate(a))return e(),!1;f.lock();var g="function"===typeof f.settings.create?this.settings.create:function(a){var c={};c[f.settings.labelField]=a;c[f.settings.valueField]=
a;return c},q=z(function(a){f.unlock();if(!a||"object"!==typeof a)return e();var b=u(a[f.settings.valueField]);if("string"!==typeof b)return e();f.setTextboxValue("");f.addOption(a);f.setCaret(d);f.addItem(b);f.refreshOptions(c&&"single"!==f.settings.mode);e(a)}),g=g.apply(this,[a,q]);"undefined"!==typeof g&&q(g);return!0},refreshItems:function(){this.lastQuery=null;this.isSetup&&this.addItem(this.items);this.refreshState();this.updateOriginalInput()},refreshState:function(){this.isRequired&&(this.items.length&&
(this.isInvalid=!1),this.$control_input.prop("required",void 0));this.refreshClasses()},refreshClasses:function(){var a=this.isFull(),c=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl);this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",c).toggleClass("full",a).toggleClass("not-full",!a).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",
this.isOpen).toggleClass("has-options",!b.isEmptyObject(this.options)).toggleClass("has-items",0<this.items.length);this.$control_input.data("grow",!a&&!c)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var c,b,f,d;a=a||{};if(1===this.tagType){f=[];c=0;for(b=this.items.length;c<b;c++)d=this.options[this.items[c]][this.settings.labelField]||"",f.push('<option value="'+q(this.items[c])+'" selected="selected">'+q(d)+
"</option>");f.length||this.$input.attr("multiple")||f.push('<option value="" selected="selected"></option>');this.$input.html(f.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(a.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder);a.triggerHandler("update",{force:!0})}},
open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var a=this.isOpen;"single"===this.settings.mode&&this.items.length&&this.hideInput();this.isOpen=!1;this.$dropdown.hide();this.setActiveOption(null);this.refreshState();a&&this.trigger("dropdown_close",
this.$dropdown)},positionDropdown:function(){var a=this.$control,c="body"===this.settings.dropdownParent?a.offset():a.position();c.top+=a.outerHeight(!0);this.$dropdown.css({width:a.outerWidth(),top:c.top,left:c.left})},clear:function(a){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:a}),this.refreshState(),this.showInput(),this.trigger("clear"))},
insertAtCaret:function(a){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(a):b(this.$control[0].childNodes[c]).before(a);this.setCaret(c+1)},deleteSelection:function(a){var c,f,d,e,g;c=a&&8===a.keyCode?-1:1;f=r(this.$control_input[0]);this.$activeOption&&!this.settings.hideSelected&&(g=this.getAdjacentOption(this.$activeOption,-1).attr("data-value"));d=[];if(this.$activeItems.length){e=this.$control.children(".active:"+(0<c?"last":"first"));e=this.$control.children(":not(input)").index(e);
0<c&&e++;c=0;for(f=this.$activeItems.length;c<f;c++)d.push(b(this.$activeItems[c]).attr("data-value"));a&&(a.preventDefault(),a.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(0>c&&0===f.start&&0===f.length?d.push(this.items[this.caretPos-1]):0<c&&f.start===this.$control_input.val().length&&d.push(this.items[this.caretPos]));if(!d.length||"function"===typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[d]))return!1;for("undefined"!==typeof e&&
this.setCaret(e);d.length;)this.removeItem(d.pop());this.showInput();this.positionDropdown();this.refreshOptions(!0);g&&(a=this.getOption(g),a.length&&this.setActiveOption(a));return!0},advanceSelection:function(a,c){var b,f;0!==a&&(this.rtl&&(a*=-1),b=0<a?"last":"first",f=r(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(b=this.$control_input.val().length,(f=0>a?0===f.start&&0===f.length:f.start===b)&&!b&&this.advanceCaret(a,c)):(c=this.$control.children(".active:"+b),c.length&&(c=this.$control.children(":not(input)").index(c),
this.setActiveItem(null),this.setCaret(0<a?c+1:c))))},advanceCaret:function(a,c){var b;0!==a&&(b=0<a?"next":"prev",this.isShiftDown?(a=this.$control_input[b](),a.length&&(this.hideInput(),this.setActiveItem(a),c&&c.preventDefault())):this.setCaret(this.caretPos+a))},setCaret:function(a){a="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,a));if(!this.isPending){var c,f,d,e;d=this.$control.children(":not(input)");c=0;for(f=d.length;c<f;c++)e=b(d[c]).detach(),c<a?
this.$control_input.before(e):this.$control.append(e)}this.caretPos=a},lock:function(){this.close();this.isLocked=!0;this.refreshState()},unlock:function(){this.isLocked=!1;this.refreshState()},disable:function(){this.$input.prop("disabled",!0);this.$control_input.prop("disabled",!0).prop("tabindex",-1);this.isDisabled=!0;this.lock()},enable:function(){this.$input.prop("disabled",!1);this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex);this.isDisabled=!1;this.unlock()},destroy:function(){var a=
this.eventNS,c=this.revertSettings;this.trigger("destroy");this.off();this.$wrapper.remove();this.$dropdown.remove();this.$input.html("").append(c.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:c.tabindex}).show();this.$control_input.removeData("grow");this.$input.removeData("selectize");b(window).off(a);b(document).off(a);b(document.body).off(a);delete this.$input[0].selectize},render:function(a,c){var b,f,d=!1,e=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;
if("option"===a||"item"===a)b=u(c[this.settings.valueField]),d=!!b;if(d&&("undefined"===typeof this.renderCache[a]&&(this.renderCache[a]={}),this.renderCache[a].hasOwnProperty(b)))return this.renderCache[a][b];f=this.settings.render[a].apply(this,[c,q]);if("option"===a||"option_create"===a)f=f.replace(e,"<$1 data-selectable");"optgroup"===a&&(c=c[this.settings.optgroupValueField]||"",f=f.replace(e,'<$1 data-group="'+(q(c)+"").replace(/\$/g,"$$$$")+'"'));if("option"===a||"item"===a)f=f.replace(e,'<$1 data-value="'+
(q(b||"")+"").replace(/\$/g,"$$$$")+'"');d&&(this.renderCache[a][b]=f);return f},clearCache:function(a){"undefined"===typeof a?this.renderCache={}:delete this.renderCache[a]},canCreate:function(a){if(!this.settings.create)return!1;var c=this.settings.createFilter;return a.length&&("function"!==typeof c||c.apply(this,[a]))&&("string"!==typeof c||(new RegExp(c)).test(a))&&(!(c instanceof RegExp)||c.test(a))}});p.count=0;p.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,
diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1E3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,
wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}};b.fn.selectize=function(a){var c=b.fn.selectize.defaults,f=b.extend({},c,a),d=f.dataAttr,e=f.labelField,g=f.valueField,q=f.optgroupField,h=f.optgroupLabelField,m=f.optgroupValueField,z=function(a,c){var n,z,y,w=c.options,p={},r=function(a){a=d&&a.attr(d);return"string"===typeof a&&a.length?JSON.parse(a):
null},t=function(a,d){a=b(a);var l=u(a.attr("value"));if(l||f.allowEmptyOption)if(p.hasOwnProperty(l))d&&((a=p[l][q])?b.isArray(a)?a.push(d):p[l][q]=[a,d]:p[l][q]=d);else{var h=r(a)||{};h[e]=h[e]||a.text();h[g]=h[g]||l;h[q]=h[q]||d;p[l]=h;w.push(h);a.is(":selected")&&c.items.push(l)}},l=function(a){var f,d,e;a=b(a);if(d=a.attr("label"))f=r(a)||{},f[h]=d,f[m]=d,c.optgroups.push(f);e=b("option",a);a=0;for(f=e.length;a<f;a++)t(e[a],d)};c.maxItems=a.attr("multiple")?null:1;y=a.children();a=0;for(n=y.length;a<
n;a++)z=y[a].tagName.toLowerCase(),"optgroup"===z?l(y[a]):"option"===z&&t(y[a])};return this.each(function(){if(!this.selectize){var q=b(this),h=this.tagName.toLowerCase(),u=q.attr("placeholder")||q.attr("data-placeholder");u||f.allowEmptyOption||(u=q.children('option[value=""]').text());u={placeholder:u,options:[],optgroups:[],items:[]};if("select"===h)z(q,u);else{var m,y,r;if(h=q.attr(d))for(u.options=JSON.parse(h),h=0,m=u.options.length;h<m;h++)u.items.push(u.options[h][g]);else if(h=b.trim(q.val()||
""),f.allowEmptyOption||h.length){y=h.split(f.delimiter);h=0;for(m=y.length;h<m;h++)r={},r[e]=y[h],r[g]=y[h],u.options.push(r);u.items=y}}new p(q,b.extend(!0,{},c,u,a))}})};b.fn.selectize.defaults=p.defaults;b.fn.selectize.support={validity:f};p.define("drag_drop",function(a){if(!b.fn.sortable)throw Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var c=this;c.lock=function(){var a=c.lock;return function(){var b=c.$control.data("sortable");b&&b.disable();
return a.apply(c,arguments)}}();c.unlock=function(){var a=c.unlock;return function(){var b=c.$control.data("sortable");b&&b.enable();return a.apply(c,arguments)}}();c.setup=function(){var a=c.setup;return function(){a.apply(this,arguments);var f=c.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:c.isLocked,start:function(a,c){c.placeholder.css("width",c.helper.css("width"));f.css({overflow:"visible"})},stop:function(){f.css({overflow:"hidden"});var a=c.$activeItems?c.$activeItems.slice():
null,d=[];f.children("[data-value]").each(function(){d.push(b(this).attr("data-value"))});c.setValue(d);c.setActiveItem(a)}})}}()}});p.define("dropdown_header",function(a){var c=this;a=b.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+
'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},a);c.setup=function(){var f=c.setup;return function(){f.apply(c,arguments);c.$dropdown_header=b(a.html(a));c.$dropdown.prepend(c.$dropdown_header)}}()});p.define("optgroup_columns",function(a){var c=this;a=b.extend({equalizeWidth:!0,equalizeHeight:!0},a);this.getAdjacentOption=function(a,c){var f=a.closest("[data-group]").find("[data-selectable]");a=f.index(a)+c;return 0<=a&&a<f.length?f.eq(a):b()};
this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var f,d;if(!this.isOpen||37!==b.keyCode&&39!==b.keyCode)return a.apply(this,arguments);c.ignoreHover=!0;d=this.$activeOption.closest("[data-group]");f=d.find("[data-selectable]").index(this.$activeOption);d=37===b.keyCode?d.prev("[data-group]"):d.next("[data-group]");d=d.find("[data-selectable]");f=d.eq(Math.min(d.length-1,f));f.length&&this.setActiveOption(f)}}();var f=function(){var a,c=f.width,b=document;"undefined"===typeof c&&(a=
b.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,b.body.appendChild(a),c=f.width=a.offsetWidth-a.clientWidth,b.body.removeChild(a));return c},d=function(){var d,e,g,q;q=b("[data-group]",c.$dropdown_content);if((e=q.length)&&c.$dropdown_content.width()){if(a.equalizeHeight){for(d=g=0;d<e;d++)g=Math.max(g,q.eq(d).height());q.css({height:g})}a.equalizeWidth&&
(g=c.$dropdown_content.innerWidth()-f(),d=Math.round(g/e),q.css({width:d}),1<e&&(d=g-d*(e-1),q.eq(e-1).css({width:d})))}};if(a.equalizeHeight||a.equalizeWidth)y.after(this,"positionDropdown",d),y.after(this,"refreshOptions",d)});p.define("remove_button",function(a){if("single"!==this.settings.mode){a=b.extend({label:"&times;",title:"Remove",className:"remove",append:!0},a);var c=this,f='<a href="javascript:void(0)" class="'+a.className+'" tabindex="-1" title="'+q(a.title)+'">'+a.label+"</a>";this.setup=
function(){var d=c.setup;return function(){if(a.append){var e=c.settings.render.item;c.settings.render.item=function(a){var c=e.apply(this,arguments),b=c.search(/(<\/[^>]+>\s*)$/);return c.substring(0,b)+f+c.substring(b)}}d.apply(this,arguments);this.$control.on("click","."+a.className,function(a){a.preventDefault();c.isLocked||(a=b(a.currentTarget).parent(),c.setActiveItem(a),c.deleteSelection()&&c.setCaret(c.items.length))})}}()}});p.define("restore_on_backspace",function(a){var c=this;a.text=a.text||
function(a){return a[this.settings.labelField]};this.onKeyDown=function(){var b=c.onKeyDown;return function(c){var f;if(8===c.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(f=this.caretPos-1,0<=f&&f<this.items.length)){f=this.options[this.items[f]];this.deleteSelection(c)&&(this.setTextboxValue(a.text.apply(this,[f])),this.refreshOptions(!0));c.preventDefault();return}return b.apply(this,arguments)}}()});return p});
Selectize.define("remove_button",function(b){if("single"!==this.settings.mode){b=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var d=this,a='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+(b.title+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'">'+b.label+"</a>";this.setup=function(){var e=d.setup;return function(){if(b.append){var g=d.settings.render.item;d.settings.render.item=function(b){var d=
g.apply(this,arguments),c=d.search(/(<\/[^>]+>\s*)$/);return d.substring(0,c)+a+d.substring(c)}}e.apply(this,arguments);this.$control.on("click","."+b.className,function(a){a.preventDefault();d.isLocked||(a=$(a.currentTarget).parent(),d.setActiveItem(a),d.deleteSelection()&&d.setCaret(d.items.length))})}}()}});
Selectize.define("preserve_on_blur",function(b){var d=this;b.text=b.text||function(a){return a[this.settings.labelField]};this.onBlur=function(a){var b=d.onBlur;return function(a){var d=this.$control_input.val();b.apply(this,a);this.setTextboxValue(d)}}()});
(function(){Selectize.define("no_results",function(b){var d=this;b=$.extend({message:"No results found.",html:function(a){return'<div class="selectize-dropdown '+a.classNames+' dropdown-empty-message"><div class="selectize-dropdown-content" style="padding: 3px 12px">'+a.message+"</div></div>"}},b);d.displayEmptyResultsMessage=function(){this.$empty_results_container.css("top",this.$control.outerHeight());this.$empty_results_container.show()};d.on("type",function(a){a='"'+d.lastQuery+'" is not valid';
d.hasOptions?d.$empty_results_container.hide():d.$empty_results_container.text(a).show()});d.onKeyDown=function(){var a=d.onKeyDown;return function(b){a.apply(d,arguments);this.$empty_results_container.hide()}}();d.onBlur=function(){var a=d.onBlur;return function(){a.apply(d,arguments);this.$empty_results_container.hide()}}();d.setup=function(){var a=d.setup;return function(){a.apply(d,arguments);d.$empty_results_container=$(b.html($.extend({classNames:d.$input.attr("class")},b)));d.$empty_results_container.insertBefore(d.$dropdown);
d.$empty_results_container.hide()}}()})})();"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},windowIsDefined="object"===("undefined"===typeof window?"undefined":_typeof(window));
(function(b){if("function"===typeof define&&define.amd)define(["jquery"],b);else if("object"===("undefined"===typeof module?"undefined":_typeof(module))&&module.exports){var d;try{d=require("jquery")}catch(a){d=null}module.exports=b(d)}else window&&(window.Slider=b(window.jQuery))})(function(b){windowIsDefined&&!window.console&&(window.console={});windowIsDefined&&!window.console.log&&(window.console.log=function(){});windowIsDefined&&!window.console.warn&&(window.console.warn=function(){});var d;
(function(a){function b(){}var d=Array.prototype.slice;(function(a){function m(c){c.prototype.option||(c.prototype.option=function(c){a.isPlainObject(c)&&(this.options=a.extend(!0,this.options,c))})}function c(c,b){a.fn[c]=function(e){if("string"===typeof e){for(var m=d.call(arguments,1),t=0,A=this.length;t<A;t++){var x=a.data(this[t],c);if(x)if(a.isFunction(x[e])&&"_"!==e.charAt(0)){var r=x[e].apply(x,m);if(void 0!==r&&r!==x)return r}else f("no such method '"+e+"' for "+c+" instance");else f("cannot call methods on "+
c+" prior to initialization; attempted to call '"+e+"'")}return this}m=this.map(function(){var f=a.data(this,c);f?(f.option(e),f._init()):(f=new b(this,e),a.data(this,c,f));return a(this)});return!m||1<m.length?m:m[0]}}if(a){var f="undefined"===typeof console?b:function(a){console.error(a)};a.bridget=function(a,b){m(b);c(a,b)};return a.bridget}})(a)})(b);(function(a){function b(c,f){function d(a,c){c="data-slider-"+c.replace(/_/g,"-");a=a.getAttribute(c);try{return JSON.parse(a)}catch(b){return a}}
this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1};this.ticksCallbackMap={};this.handleCallbackMap={};"string"===typeof c?this.element=document.querySelector(c):c instanceof HTMLElement&&(this.element=c);f=f?f:{};c=Object.keys(this.defaultOptions);for(var e=0;e<c.length;e++){var g=c[e],m=f[g],m="undefined"!==typeof m?m:d(this.element,g),m=null!==m?m:this.defaultOptions[g];this.options||(this.options={});this.options[g]=m}"auto"===this.options.rtl&&(this.options.rtl=
"rtl"===window.getComputedStyle(this.element).direction);"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position=this.options.rtl?"left":"right";f=this.element.style.width;c=!1;var g=this.element.parentNode,t,A,x,r,p;if(this.sliderElem)c=!0;else{this.sliderElem=
document.createElement("div");this.sliderElem.className="slider";m=document.createElement("div");m.className="slider-track";A=document.createElement("div");A.className="slider-track-low";t=document.createElement("div");t.className="slider-selection";x=document.createElement("div");x.className="slider-track-high";r=document.createElement("div");r.className="slider-handle min-slider-handle";r.setAttribute("role","slider");r.setAttribute("aria-valuemin",this.options.min);r.setAttribute("aria-valuemax",
this.options.max);p=document.createElement("div");p.className="slider-handle max-slider-handle";p.setAttribute("role","slider");p.setAttribute("aria-valuemin",this.options.min);p.setAttribute("aria-valuemax",this.options.max);m.appendChild(A);m.appendChild(t);m.appendChild(x);this.rangeHighlightElements=[];e=this.options.rangeHighlights;if(Array.isArray(e)&&0<e.length)for(var n=0;n<e.length;n++){var w=document.createElement("div");w.className="slider-rangeHighlight slider-selection "+(e[n].class||
"");this.rangeHighlightElements.push(w);m.appendChild(w)}(e=Array.isArray(this.options.labelledby))&&this.options.labelledby[0]&&r.setAttribute("aria-labelledby",this.options.labelledby[0]);e&&this.options.labelledby[1]&&p.setAttribute("aria-labelledby",this.options.labelledby[1]);!e&&this.options.labelledby&&(r.setAttribute("aria-labelledby",this.options.labelledby),p.setAttribute("aria-labelledby",this.options.labelledby));this.ticks=[];if(Array.isArray(this.options.ticks)&&0<this.options.ticks.length){this.ticksContainer=
document.createElement("div");this.ticksContainer.className="slider-tick-container";for(e=0;e<this.options.ticks.length;e++){n=document.createElement("div");n.className="slider-tick";if(this.options.ticks_tooltip){var D=this._addTickListener(),w=D.addMouseEnter(this,n,e),D=D.addMouseLeave(this,n);this.ticksCallbackMap[e]={mouseEnter:w,mouseLeave:D}}this.ticks.push(n);this.ticksContainer.appendChild(n)}t.className+=" tick-slider-selection"}this.tickLabels=[];if(Array.isArray(this.options.ticks_labels)&&
0<this.options.ticks_labels.length)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",e=0;e<this.options.ticks_labels.length;e++)n=document.createElement("div"),w=0===this.options.ticks_positions.length,w=this.options.reversed&&w?this.options.ticks_labels.length-(e+1):e,n.className="slider-tick-label",n.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(n),this.tickLabelContainer.appendChild(n);e=function(a){var c=document.createElement("div");
c.className="tooltip-arrow";var b=document.createElement("div");b.className="tooltip-inner";a.appendChild(c);a.appendChild(b)};n=document.createElement("div");n.className="tooltip tooltip-main";n.setAttribute("role","presentation");e(n);w=document.createElement("div");w.className="tooltip tooltip-min";w.setAttribute("role","presentation");e(w);D=document.createElement("div");D.className="tooltip tooltip-max";D.setAttribute("role","presentation");e(D);this.sliderElem.appendChild(m);this.sliderElem.appendChild(n);
this.sliderElem.appendChild(w);this.sliderElem.appendChild(D);this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer);this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer);this.sliderElem.appendChild(r);this.sliderElem.appendChild(p);g.insertBefore(this.sliderElem,this.element);this.element.style.display="none"}a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem));this.eventToCallbackMap={};this.sliderElem.id=this.options.id;this.touchCapable=
"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;this.touchY=this.touchX=0;this.tooltip=this.sliderElem.querySelector(".tooltip-main");this.tooltipInner=this.tooltip.querySelector(".tooltip-inner");this.tooltip_min=this.sliderElem.querySelector(".tooltip-min");this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner");this.tooltip_max=this.sliderElem.querySelector(".tooltip-max");this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner");
h[this.options.scale]&&(this.options.scale=h[this.options.scale]);!0===c&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a);this._removeProperty(this.trackSelection,a);this._removeProperty(this.trackHigh,
a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left");this._removeProperty(a,"right");this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left");this._removeProperty(a,"right");this._removeProperty(a,"top");this._removeProperty(a,"margin-left");this._removeProperty(a,"margin-right");this._removeProperty(a,"margin-top");this._removeClass(a,"right");this._removeClass(a,"left");this._removeClass(a,
"top")},this));"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos=this.options.rtl?"right":"left",this.mousePos="pageX",this.sizePos="offsetWidth");this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl");this._setTooltipPosition();Array.isArray(this.options.ticks)&&
0<this.options.ticks.length&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks));Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value;this.trackLow=A||this.trackLow;this.trackSelection=t||this.trackSelection;this.trackHigh=x||this.trackHigh;if("none"===this.options.selection)this._addClass(this.trackLow,
"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide");else if("after"===this.options.selection||"before"===this.options.selection)this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide");this.handle1=r||this.handle1;this.handle2=p||this.handle2;if(!0===c)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),e=0;e<this.ticks.length;e++)this._removeClass(this.ticks[e],
"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),e=0;e<this.ticks.length;e++)this._addClass(this.ticks[e],this.options.handle);this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];this.setValue(this._state.value);this.handle1Keydown=this._keydown.bind(this,0);this.handle1.addEventListener("keydown",this.handle1Keydown,
!1);this.handle2Keydown=this._keydown.bind(this,1);this.handle2.addEventListener("keydown",this.handle2Keydown,!1);this.mousedown=this._mousedown.bind(this);this.touchstart=this._touchstart.bind(this);this.touchmove=this._touchmove.bind(this);if(this.touchCapable){var R=!1;try{var S=Object.defineProperty({},"passive",{get:function(){R=!0}});window.addEventListener("test",null,S)}catch(Y){}t=R?{passive:!0}:!1;this.sliderElem.addEventListener("touchstart",this.touchstart,t);this.sliderElem.addEventListener("touchmove",
this.touchmove,t)}this.sliderElem.addEventListener("mousedown",this.mousedown,!1);this.resize=this._resize.bind(this);window.addEventListener("resize",this.resize,!1);"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip?
(t=this._addTickListener(),A=t.addMouseEnter(this,this.handle1),x=t.addMouseLeave(this,this.handle1),this.handleCallbackMap.handle1={mouseEnter:A,mouseLeave:x},A=t.addMouseEnter(this,this.handle2),x=t.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:A,mouseLeave:x}):(this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1)),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",
this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1));this.options.enabled?this.enable():this.disable()}var g={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},
h={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min),d=!0;if(0<this.options.ticks_positions.length){for(var e,g,h,b=0,d=1;d<this.options.ticks_positions.length;d++)if(a<=this.options.ticks_positions[d]){e=this.options.ticks[d-1];h=this.options.ticks_positions[d-1];g=this.options.ticks[d];b=this.options.ticks_positions[d];break}b=e+(a-h)/(b-h)*(g-e);d=!1}a=(d?this.options.min:0)+Math.round(b/this.options.step)*this.options.step;return a<this.options.min?this.options.min:a>
this.options.max?this.options.max:a},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(0<this.options.ticks_positions.length){for(var b,d,e,g=0,h=0;h<this.options.ticks.length;h++)if(a<=this.options.ticks[h]){b=0<h?this.options.ticks[h-1]:0;e=0<h?this.options.ticks_positions[h-1]:0;d=this.options.ticks[h];g=this.options.ticks_positions[h];break}if(0<h)return e+(a-b)/(d-b)*(g-e)}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=
0===this.options.min?0:Math.log(this.options.min);a=Math.exp(b+(Math.log(this.options.max)-b)*a/100);a=this.options.min+Math.round((a-this.options.min)/this.options.step)*this.options.step;return a<this.options.min?this.options.min:a>this.options.max?this.options.max:a},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=0===this.options.min?0:Math.log(this.options.min);return 100*((0===a?0:Math.log(a))-b)/(Math.log(this.options.max)-b)}}};d=function(a,f){b.call(this,a,
f);return this};d.prototype={_init:function(){},constructor:d,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},
getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,d){a||(a=0);var e=this.getValue();this._state.value=this._validateInputValue(a);a=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=a(this._state.value[0]),this._state.value[1]=a(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,
Math.min(this.options.max,this._state.value[1]))):(this._state.value=a(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min);this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:
[0,0,100];this._layout();a=this.options.range?this._state.value:this._state.value[0];this._setDataVal(a);!0===b&&this._trigger("slide",a);e!==a&&!0===d&&this._trigger("change",{oldValue:e,newValue:a});return this},destroy:function(){this._removeSliderEventHandlers();this.sliderElem.parentNode.removeChild(this.sliderElem);this.element.style.display="";this._cleanUpEventCallbacksMap();this.element.removeAttribute("data");a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){this._state.enabled=
!1;this.handle1.removeAttribute("tabindex");this.handle2.removeAttribute("tabindex");this._addClass(this.sliderElem,"slider-disabled");this._trigger("slideDisabled");return this},enable:function(){this._state.enabled=!0;this.handle1.setAttribute("tabindex",0);this.handle2.setAttribute("tabindex",0);this._removeClass(this.sliderElem,"slider-disabled");this._trigger("slideEnabled");return this},toggle:function(){this._state.enabled?this.disable():this.enable();return this},isEnabled:function(){return this._state.enabled},
on:function(a,b){this._bindNonQueryEventHandler(a,b);return this},off:function(c,b){a?(this.$element.off(c,b),this.$sliderElem.off(c,b)):this._unbindNonQueryEventHandler(c,b)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){this.options[a]=b;return this},refresh:function(){this._removeSliderEventHandlers();b.call(this,this.element,this.options);a&&a.data(this.element,"slider",this);return this},relayout:function(){this._resize();this._layout();return this},
_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1);this.handle2.removeEventListener("keydown",this.handle2Keydown,!1);if(this.options.ticks_tooltip){for(var a=this.ticksContainer.getElementsByClassName("slider-tick"),b=0;b<a.length;b++)a[b].removeEventListener("mouseenter",this.ticksCallbackMap[b].mouseEnter,!1),a[b].removeEventListener("mouseleave",this.ticksCallbackMap[b].mouseLeave,!1);this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,
!1);this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1);this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1);this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1)}this.ticksCallbackMap=this.handleCallbackMap=null;this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1));this.hideTooltip&&(this.handle1.removeEventListener("blur",
this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1));this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1);this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1);this.sliderElem.removeEventListener("touchstart",this.touchstart,!1);this.sliderElem.removeEventListener("touchmove",this.touchmove,!1);this.sliderElem.removeEventListener("mousedown",this.mousedown,!1);window.removeEventListener("resize",this.resize,
!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]);this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){a=this.eventToCallbackMap[a];if(void 0!==a)for(var d=0;d<a.length;d++)if(a[d]===b){a.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++)delete this.eventToCallbackMap[a[b]]},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,
"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none");this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in"));this._state.over=!1},_setToolTipOnMouseOver:function(a){function b(a,c){return c?[100-
a.percentage[0],this.options.range?100-a.percentage[1]:a.percentage[1]]:[a.percentage[0],a.percentage[1]]}var d=this.options.formatter(a?a.value[0]:this._state.value[0]);a=a?b(a,this.options.reversed):b(this._state,this.options.reversed);this._setText(this.tooltipInner,d);this.tooltip.style[this.stylePos]=a[0]+"%";"vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/
2+"px")},_addTickListener:function(){return{addMouseEnter:function(a,b,d){var e=function(){var b=a._state,f=parseInt(0<=d?d:this.attributes["aria-valuenow"].value,10);b.value[0]=f;b.percentage[0]=a.options.ticks_positions[f];a._setToolTipOnMouseOver(b);a._showTooltip()};b.addEventListener("mouseenter",e,!1);return e},addMouseLeave:function(a,b){var d=function(){a._hideTooltip()};b.addEventListener("mouseleave",d,!1);return d}}},_layout:function(){var a;a=this.options.reversed?[100-this._state.percentage[0],
this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]];this.handle1.style[this.stylePos]=a[0]+"%";this.handle1.setAttribute("aria-valuenow",this._state.value[0]);isNaN(this.options.formatter(this._state.value[0]))&&this.handle1.setAttribute("aria-valuetext",this.options.formatter(this._state.value[0]));this.handle2.style[this.stylePos]=a[1]+"%";this.handle2.setAttribute("aria-valuenow",this._state.value[1]);isNaN(this.options.formatter(this._state.value[1]))&&
this.handle2.setAttribute("aria-valuetext",this.options.formatter(this._state.value[1]));if(0<this.rangeHighlightElements.length&&Array.isArray(this.options.rangeHighlights)&&0<this.options.rangeHighlights.length)for(var b=0;b<this.options.rangeHighlights.length;b++){var d=this._toPercentage(this.options.rangeHighlights[b].start),e=this._toPercentage(this.options.rangeHighlights[b].end);if(this.options.reversed)var g=100-e,e=100-d,d=g;(d=this._createHighlightRange(d,e))?"vertical"===this.options.orientation?
(this.rangeHighlightElements[b].style.top=d.start+"%",this.rangeHighlightElements[b].style.height=d.size+"%"):(this.options.rtl?this.rangeHighlightElements[b].style.right=d.start+"%":this.rangeHighlightElements[b].style.left=d.start+"%",this.rangeHighlightElements[b].style.width=d.size+"%"):this.rangeHighlightElements[b].style.display="none"}if(Array.isArray(this.options.ticks)&&0<this.options.ticks.length){b="vertical"===this.options.orientation?"height":"width";d="vertical"===this.options.orientation?
"marginTop":this.options.rtl?"marginRight":"marginLeft";e=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var h=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[d]=-e/2+"px"),h=this.tickLabelContainer.offsetHeight;else for(g=0;g<this.tickLabelContainer.childNodes.length;g++)this.tickLabelContainer.childNodes[g].offsetHeight>h&&(h=this.tickLabelContainer.childNodes[g].offsetHeight);"horizontal"===this.options.orientation&&
(this.sliderElem.style.marginBottom=h+"px")}for(g=0;g<this.options.ticks.length;g++)h=this.options.ticks_positions[g]||this._toPercentage(this.options.ticks[g]),this.options.reversed&&(h=100-h),this.ticks[g].style[this.stylePos]=h+"%",this._removeClass(this.ticks[g],"in-selection"),this.options.range?h>=a[0]&&h<=a[1]&&this._addClass(this.ticks[g],"in-selection"):"after"===this.options.selection&&h>=a[0]?this._addClass(this.ticks[g],"in-selection"):"before"===this.options.selection&&h<=a[0]&&this._addClass(this.ticks[g],
"in-selection"),this.tickLabels[g]&&(this.tickLabels[g].style[b]=e+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[g]?(this.tickLabels[g].style.position="absolute",this.tickLabels[g].style[this.stylePos]=h+"%",this.tickLabels[g].style[d]=-e/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[g].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[g].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[d]=
this.sliderElem.offsetWidth/2*-1+"px"))}this.options.range?(b=this.options.formatter(this._state.value),this._setText(this.tooltipInner,b),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px"),b=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner_min,b),b=this.options.formatter(this._state.value[1]),
this._setText(this.tooltipInner_max,b),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,
"margin-"+this.stylePos,-this.tooltip_max.offsetWidth/2+"px")):(b=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,b),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px"));"vertical"===this.options.orientation?(this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+
"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%"):("right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(a[0],a[1])+"%":this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=
Math.abs(a[0]-a[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%",a=this.tooltip_min.getBoundingClientRect(),b=this.tooltip_max.getBoundingClientRect(),"bottom"===this.options.tooltip_position?a.right>b.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,
"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):a.right>b.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top))},_createHighlightRange:function(a,b){return this._isHighlightRange(a,b)?a>b?{start:b,size:a-
b}:{start:a,size:b-a}:null},_isHighlightRange:function(a,b){return 0<=a&&100>=a&&0<=b&&100>=b?!0:!1},_resize:function(a){this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem);this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);
this.options.range?(this._state.dragged=Math.abs(this._state.percentage[0]-b)<Math.abs(this._state.percentage[1]-b)?0:1,this._adjustPercentageForRangeSliders(b)):this._state.dragged=0;this._state.percentage[this._state.dragged]=b;this._layout();this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1));this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1);this.mouseup&&document.removeEventListener("mouseup",
this.mouseup,!1);this.mousemove=this._mousemove.bind(this);this.mouseup=this._mouseup.bind(this);this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1));document.addEventListener("mousemove",this.mousemove,!1);document.addEventListener("mouseup",this.mouseup,!1);this._state.inDrag=!0;b=this._calculateValue();this._trigger("slideStart",b);this._setDataVal(b);this.setValue(b,!1,!0);a.returnValue=!1;this.options.focus&&this._triggerFocusOnHandle(this._state.dragged);
return!0},_touchstart:function(a){void 0===a.changedTouches?this._mousedown(a):(a=a.changedTouches[0],this.touchX=a.pageX,this.touchY=a.pageY)},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus();1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var d;switch(b.keyCode){case 37:case 40:d=-1;break;case 39:case 38:d=1}if(d){if(this.options.natural_arrow_keys){var e="horizontal"===this.options.orientation&&this.options.reversed;if("vertical"===this.options.orientation&&
!this.options.reversed||e)d=-d}d=this._state.value[a]+d*this.options.step;e=d/this.options.max*100;this._state.keyCtrl=a;this.options.range&&(this._adjustPercentageForRangeSliders(e),d=[this._state.keyCtrl?this._state.value[0]:d,this._state.keyCtrl?d:this._state.value[1]]);this._trigger("slideStart",d);this._setDataVal(d);this.setValue(d,!0,!0);this._setDataVal(d);this._trigger("slideStop",d);this._layout();this._pauseEvent(b);delete this._state.keyCtrl;return!1}},_pauseEvent:function(a){a.stopPropagation&&
a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;a=this._getPercentage(a);this._adjustPercentageForRangeSliders(a);this._state.percentage[this._state.dragged]=a;this._layout();a=this._calculateValue(!0);this.setValue(a,!0,!0);return!1},_touchmove:function(a){if(void 0!==a.changedTouches){var b=a.changedTouches[0],d=b.pageX-this.touchX,b=b.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&
5>=d&&-5<=d&&(15<=b||-15>=b)?this._mousedown(a):5>=b&&-5<=b&&(15<=d||-15>=d)&&this._mousedown(a))}},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a),b=b?b-1:0,d=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<d?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],
b)>d?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._state.value[1]/this.options.max*100<a?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._state.value[0]/this.options.max*100>a&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",
this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1));document.removeEventListener("mousemove",this.mousemove,!1);document.removeEventListener("mouseup",this.mouseup,!1);this._state.inDrag=!1;!1===this._state.over&&this._hideTooltip();var a=this._calculateValue(!0);this._layout();this._setDataVal(a);this._trigger("slideStop",a);return!1},_calculateValue:function(a){var b;this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),
b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b));if(a){a=[b,Infinity];for(var d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=a[1]&&(a=[this.options.ticks[d],e])}if(a[1]<=this.options.ticks_snap_bounds)return a[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);
return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){a=a.toFixed(b);return parseFloat(a)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);a=a[this.mousePos]-this._state.offset[this.stylePos];"right"===this.stylePos&&(a=-a);a=a/this._state.size*100;a=Math.round(a/
this._state.percentage[2])*this._state.percentage[2];this.options.reversed&&(a=100-a);return Math.max(0,Math.min(100,a))},_validateInputValue:function(a){if(isNaN(+a)){if(Array.isArray(a))return this._validateArray(a),a;throw Error(g.formatInvalidInputErrorMsg(a));}return+a},_validateArray:function(a){for(var b=0;b<a.length;b++){var d=a[b];if("number"!==typeof d)throw Error(g.formatInvalidInputErrorMsg(d));}},_setDataVal:function(a){this.element.setAttribute("data-value",a);this.element.setAttribute("value",
a);this.element.value=a},_trigger:function(c,b){b=b||0===b?b:void 0;var d=this.eventToCallbackMap[c];if(d&&d.length)for(var e=0;e<d.length;e++)(0,d[e])(b);a&&this._triggerJQueryEvent(c,b)},_triggerJQueryEvent:function(a,b){a={type:a,value:b};this.$element.trigger(a);this.$sliderElem.trigger(a)},_unbindJQueryEventHandlers:function(){this.$element.off();this.$sliderElem.off()},_setText:function(a,b){"undefined"!==typeof a.textContent?a.textContent=b:"undefined"!==typeof a.innerText&&(a.innerText=b)},
_removeClass:function(a,b){b=b.split(" ");for(var d=a.className,e=0;e<b.length;e++)d=d.replace(new RegExp("(?:\\s|^)"+b[e]+"(?:\\s|$)")," ");a.className=d.trim()},_addClass:function(a,b){b=b.split(" ");for(var d=a.className,e=0;e<b.length;e++){var g=b[e];(new RegExp("(?:\\s|^)"+g+"(?:\\s|$)")).test(d)||(d+=" "+g)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetRight:function(a){return a.getBoundingClientRect().right},_offsetTop:function(a){for(var b=a.offsetTop;(a=
a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),right:this._offsetRight(a),top:this._offsetTop(a)}},_css:function(b,d,e){a?a.style(b,d,e):(d=d.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()}),b.style[d]=e)},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},
_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b;b=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right";var d="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b);a.style[d]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom");a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top");
a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}};if(a&&a.fn){var m=void 0;a.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),m="bootstrapSlider"):(a.bridget("slider",d),m="slider");a.bridget("bootstrapSlider",d);a(function(){a("input[data-provide=slider]")[m]()})}})(b);return d});
function MGPopUp(b){this.cookieName=b;this.divId=function(b){this.modalDivId=b;return this};this.modalHtml=function(b,a,e){e||(e='<button type="button" class="btn btn-primary btn-lg" data-dismiss="modal">\u0417\u0430\u043a\u0440\u044b\u0442\u044c</button>');b=$('<div class="hidden modal fade" id="ds_teaser-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n        <div class="modal-dialog modal-lg" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h2 class="modal-title" id="myModalLabel">'+
b+'</h2>\n                </div>\n                <div class="modal-body">\n'+a+'\n                </div>\n                <div class="modal-footer">\n'+e+"\n                </div>\n            </div>\n        </div>\n        </div>");$("body").append(b);this.modalDivId="ds_teaser-modal";return this};this.showIf=function(b,a){!this.modalDivId||$.cookie(this.cookieName)||null!=b&&!b(this)||(a=a||150,$("#"+this.modalDivId).modal("show").removeClass("hidden"),$.cookie(this.cookieName,"true",{expires:a,
path:"/"}))}}
!function(b){if(!b.isInit){var d={getCookie:function(a){a=("; "+document.cookie).split("; "+a+"=");return 2>a.length?void 0:a.pop().split(";").shift()},setCookie:function(a,b,d,h,m,c){if(""!=a){var f=new Date;f.setDate(f.getDate()+(d||365));a=[a+"="+b,"expires="+f.toUTCString(),"path="+(m||"/")];h&&a.push("domain="+h);c&&a.push("secure");document.cookie=a.join(";")}},compileTemplate:function(a,b){return a.replace(/{{([a-z][a-z0-9\-_]*)}}/gi,function(a,d){return b(d)||""})},addClass:function(a,b){a.className+=
" "+b},removeClass:function(a,b){a.className=a.className.replace(new RegExp("\\b"+b+"\\b"),"")},hasClass:function(a,b){return 1===a.nodeType&&0<=(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")},extend:function(a,b){for(var d in b)b.hasOwnProperty(d)&&(d in a&&this.isPlainObj(a[d])&&this.isPlainObj(b[d])?this.extend(a[d],b[d]):a[d]=b[d]);return a},isPlainObj:function(a){return"object"==typeof a&&null!==a&&a.constructor==Object},normalizeColor:function(a){return"#"==a[0]&&(a=a.substr(1)),
3==a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),a},hashColors:function(a){var b,d,h=0;if(0===a.length)return h;b=0;for(d=a.length;b<d;++b)h=(h<<5)-h+a.charCodeAt(b),h|=0;return h},getLuminance:function(a){var b=parseInt(this.normalizeColor(a),16);a=(b>>16)-20;var d=(b>>8&255)-20,b=(255&b)-20;return"#"+(16777216+65536*(255>a?1>a?0:a:255)+256*(255>d?1>d?0:d:255)+(255>b?1>b?0:b:255)).toString(16).slice(1)},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|IEMobile|Opera Mini|BlackBerry/i.test(navigator.userAgent)}};
b.fadeEnd=function(){var a=document.createElement("div"),b={t:"transitionend",MozT:"transitionend",msT:"MSTransitionEnd",OT:"oTransitionEnd",WebkitT:"webkitTransitionEnd"},d;for(d in b)if(b.hasOwnProperty(d)&&void 0!==a.style[d+"ransition"])return b[d];return""}();b.fading=!!b.fadeEnd;b.customCSS={};b.Popup=function(){function a(){this.init.apply(this,arguments)}function e(a){this.displayTimeout=null;d.removeClass(a,"wpcc-invisible")}function g(a){a.style.display="none";a.removeEventListener(b.fadeEnd,
this.afterFading);this.afterFading=null}function h(a){var f=this.options,e=document.createElement("div"),f=f.container&&1===f.container.nodeType?f.container:document.body;e.innerHTML=a;a=e.children[0];a.style.display="none";d.hasClass(a,"wpcc-container")&&b.fading&&d.addClass(a,"wpcc-invisible");this.onButtonClick=function(a){this.setStatus("dismiss");this.close()}.bind(this);this.onButtonEnter=function(a){13===a.keyCode&&(a.preventDefault(),this.setStatus("dismiss"),this.close())}.bind(this);e=a.getElementsByClassName("wpcc-btn")[0];
return e.addEventListener("click",this.onButtonClick),e.addEventListener("keyup",this.onButtonEnter),f.firstChild?f.insertBefore(a,f.firstChild):f.appendChild(a),a}var m={enabled:!0,autoOpen:!0,cookie:{name:"gdpr-flag",path:"/",domain:"",expiryDays:365,secure:!1},content:{message:"This website uses cookies to ensure you get the best experience on our website.",link:"Learn more",href:"https://www.internetcookies.org",target:"_blank",button:"Got it!"},container:'<div class="wpcc-container {{classes}}">{{children}}</div>',
template:'<span class="wpcc-message">{{message}} <a class="wpcc-privacy" href="{{href}}" rel="noopener" target="{{target}}" tabindex="1">{{link}}</a></span><div class="wpcc-compliance"><a class="wpcc-btn" tabindex="2">{{button}}</a></div>',pushdown:!1,position:"bottom-left",corners:"",padding:"",margin:"",fontsize:"",transparency:"",border:"",colors:null,onInit:function(a){},onStatusChange:function(a,b){}};return a.prototype.init=function(a){this.options&&this.destroy();d.extend(this.options={},m);
d.isPlainObj(a)&&d.extend(this.options,a);(function(){var a=this.options.onInit.bind(this);if(window.CookiesOK||window.navigator.CookiesOK)return a("dismiss"),!0;var b=this.getStatus(),c="dismiss"==b;c&&a(b);return c}).call(this)&&(this.options.enabled=!1);a=this.options.container.replace("{{classes}}",function(){var a=this.options,c=["wpcc-"+("top"==a.position||"bottom"==a.position?"banner":"float")];a.corners&&c.push("wpcc-corners-round wpcc-corners-"+a.corners);a.padding&&c.push("wpcc-padding-"+
a.padding);a.margin&&c.push("wpcc-margin-"+a.margin);a.transparency&&c.push("wpcc-transparency-"+a.transparency);a.fontsize&&c.push("wpcc-fontsize-"+a.fontsize);a.border&&c.push("wpcc-border-"+a.border);a.pushdown&&c.push("wpcc-pushdown");c.push.apply(c,function(){var a=[];return this.options.position.split("-").forEach(function(b){a.push("wpcc-"+b)}),a}.call(this));(function(a){var c=d.hashColors(JSON.stringify(a)),e="wpcc-color-custom-"+c,f=d.isPlainObj(a);this.customCSS=f?e:null;if(f){var g="."+
e;if(b.customCSS[c])++b.customCSS[c].references;else{var e={},h=a.popup;a=a.button;h&&(e[g+".wpcc-container"]=["background-color: "+h.background,"border-color: "+h.border,"color: "+h.text],e[g+" .wpcc-privacy,"+g+" .wpcc-privacy:active,"+g+" .wpcc-privacy:visited"]=["color: "+h.text],a&&(e[g+" .wpcc-btn"]=["color: "+a.text,"background-color: "+a.background],g=g+" .wpcc-btn:focus, "+g+" .wpcc-btn:hover",h=a.background,a="000000"==(h=d.normalizeColor(h))?"#222222":d.getLuminance(h),e[g]=["background-color: "+
a]));a=document.createElement("style");document.head.appendChild(a);b.customCSS[c]={references:1,element:a.sheet};var c=-1,m;for(m in e)e.hasOwnProperty(m)&&a.sheet.insertRule(m+"{"+e[m].join(";")+"}",++c)}}return f}).call(this,this.options.colors);this.customCSS&&c.push(this.customCSS);return c}.call(this).join(" ")).replace("{{children}}",function(){var a=this.options;return d.compileTemplate(a.template,function(b){var c=a.content[b];return b&&"string"==typeof c&&c.length?c:""})}.call(this));this.options.pushdown?
(this.wrapper=h.call(this,'<div class="wpcc-pushdown-wrap">'+a+"</div>"),this.wrapper.style.display="",this.element=this.wrapper.firstChild,this.element.style.display="none",d.addClass(this.element,"wpcc-invisible")):(this.wrapper=null,this.element=h.call(this,a));this.options.autoOpen&&this.autoOpen()},a.prototype.destroy=function(){this.onButtonClick&&this.element&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null);this.onButtonEnter&&this.element&&(this.element.removeEventListener("keyup",
this.onButtonEnter),this.onButtonEnter=null);this.wrapper&&this.wrapper.parentNode?this.wrapper.parentNode.removeChild(this.wrapper):this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);this.element=this.wrapper=null;var a=this.options.colors;if(d.isPlainObj(a)){var a=d.hashColors(JSON.stringify(a)),e=b.customCSS[a];e&&!--e.references&&((e=e.element.ownerNode)&&e.parentNode&&e.parentNode.removeChild(e),b.customCSS[a]=null)}this.options=null},a.prototype.open=function(a){if(this.element)return this.isOpen()||
(b.fading?this.fadeIn():this.element.style.display=""),this},a.prototype.close=function(){if(this.element)return this.isOpen()&&(b.fading?this.fadeOut():this.element.style.display="none"),this},a.prototype.fadeIn=function(){var a=this.element;if(b.fading&&a&&(this.afterFading&&g.call(this,a),d.hasClass(a,"wpcc-invisible"))){if(a.style.display="",this.options.pushdown){var f=0,h=this.element.clientHeight;d.hasClass(this.element,"wpcc-border-1")?f=1:d.hasClass(this.element,"wpcc-border-2")?f=2:d.hasClass(this.element,
"wpcc-border-3")?f=3:d.hasClass(this.element,"wpcc-border-4")?f=4:d.hasClass(this.element,"wpcc-border-5")&&(f=5);this.element.parentNode.style.maxHeight=h+2*f+"px"}this.displayTimeout=setTimeout(e.bind(this,a),25)}},a.prototype.fadeOut=function(){var a=this.element;a&&b.fading&&(this.displayTimeout&&(clearTimeout(this.displayTimeout),e.bind(this,a)),d.hasClass(a,"wpcc-invisible")||(this.options.pushdown&&(this.element.parentNode.style.maxHeight=""),this.afterFading=g.bind(this,a),a.addEventListener(b.fadeEnd,
this.afterFading),d.addClass(a,"wpcc-invisible")))},a.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&(!b.fading||!d.hasClass(this.element,"wpcc-invisible"))},a.prototype.savedCookie=function(a){return"dismiss"==this.getStatus()},a.prototype.autoOpen=function(a){!this.savedCookie()&&this.options.enabled&&this.open()},a.prototype.setStatus=function(a){var b=this.options.cookie,e=d.getCookie(b.name);d.setCookie(b.name,a,b.expiryDays,b.domain,b.path,b.secure);this.options.onStatusChange.call(this,
a,"dismiss"==e)},a.prototype.getStatus=function(){return d.getCookie(this.options.cookie.name)},a.prototype.clearStatus=function(){var a=this.options.cookie;d.setCookie(a.name,"",-1,a.domain,a.path,a.secure)},a}();b.init=function(a,d,g){d||(d=function(){});g||(g=function(){});d(new b.Popup(a))};b.isInit=!0;window.wpcc=b}}(window.wpcc||{});